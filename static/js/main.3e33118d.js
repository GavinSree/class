!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/class/",t(t.s=11)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=r(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)i.call(n,c)&&(u[c]=n[c]);if(o){s=o(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t,n){"use strict";e.exports=n(18)},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";function r(){function e(e){p(d[e],"delete"),delete d[e]}function t(e){return e=e||s,a(d,e)||o("no-app",{name:e}),d[e]}function n(e,t){if(void 0===t&&(t={}),"object"!==typeof t||null===t){t={name:t}}var n=t;void 0===n.name&&(n.name=s);var r=n.name;"string"===typeof r&&r||o("bad-app-name",{name:r+""}),a(d,r)&&o("duplicate-app",{name:r});var i=new l(e,n,_);return d[r]=i,p(i,"create"),i}function u(){return Object.keys(d).map(function(e){return d[e]})}function c(e,n,r,a,s){y[e]&&o("duplicate-service",{name:e}),y[e]=n,a&&(v[e]=a,u().forEach(function(e){a("create",e)}));var c=function(n){return void 0===n&&(n=t()),"function"!==typeof n[e]&&o("invalid-app-argument",{name:e}),n[e]()};return void 0!==r&&i.deepExtend(c,r),_[e]=c,l.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,s?t:[])},c}function h(e){i.deepExtend(_,e)}function p(e,t){Object.keys(y).forEach(function(n){var r=f(e,n);null!==r&&v[r]&&v[r](t,e)})}function f(e,t){if("serverAuth"===t)return null;var n=t;e.options;return n}var d={},y={},v={},_={__esModule:!0,initializeApp:n,app:t,apps:null,Promise:Promise,SDK_VERSION:"5.5.9",INTERNAL:{registerService:c,createFirebaseNamespace:r,extendNamespace:h,createSubscribe:i.createSubscribe,ErrorFactory:i.ErrorFactory,removeApp:e,factories:y,useAsService:f,Promise:Promise,deepExtend:i.deepExtend}};return i.patchProperty(_,"default",_),Object.defineProperty(_,"apps",{get:u}),i.patchProperty(t,"App",l),_}function o(e,t){throw h.create(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s="[DEFAULT]",u=[],l=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled||!1,this.options_=i.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){u.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){u=u.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed_(),this._automaticDataCollectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(r){t.push(e.services_[n][r])})}),Promise.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=s),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==s?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;i.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(u.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),u=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&o("app-deleted",{name:this.name_})},e}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log("dc");var c={"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."},h=new i.ErrorFactory("app","Firebase",c),p=r();t.firebase=p,t.default=p},function(e,t,n){"use strict";function r(){}function o(e){try{return e.then}catch(e){return _=e,g}}function i(e,t){try{return e(t)}catch(e){return _=e,g}}function a(e,t,n){try{e(t,n)}catch(e){return _=e,g}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&y(e,this)}function u(e,t,n){return new e.constructor(function(o,i){var a=new s(r);a.then(o,i),l(e,new d(t,n,a))})}function l(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){v(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?h(t.promise,e._18):p(t.promise,e._18));var r=i(n,e._18);r===g?p(t.promise,_):h(t.promise,r)})}function h(e,t){if(t===e)return p(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=o(t);if(n===g)return p(e,_);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void f(e);if("function"===typeof n)return void y(n.bind(t),e)}e._83=1,e._18=t,f(e)}function p(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),f(e)}function f(e){if(1===e._75&&(l(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)l(e,e._38[t]);e._38=null}}function d(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function y(e,t){var n=!1,r=a(e,function(e){n||(n=!0,h(t,e))},function(e){n||(n=!0,p(t,e))});n||r!==g||(n=!0,p(t,_))}var v=n(14),_=null,g={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return u(this,e,t);var n=new s(r);return l(this,new d(e,t,n)),n}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";n(33);var r=function(e){return e&&"object"===typeof e&&"default"in e?e.default:e}(n(4));e.exports=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(h===clearTimeout)return clearTimeout(e);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){y&&f&&(y=!1,f.length?d=f.concat(d):v=-1,d.length&&s())}function s(){if(!y){var e=o(a);y=!0;for(var t=d.length;t;){for(f=d,d=[];++v<t;)f&&f[v].run();v=-1,t=d.length}f=null,y=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,h,p=e.exports={};!function(){try{c="function"===typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"===typeof clearTimeout?clearTimeout:r}catch(e){h=r}}();var f,d=[],y=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||y||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){return o(void 0,e)}function o(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=o(e[r],t[r]));return e}function i(e,t,n){e[t]=n}function a(e){var t=I;return I=e,t}function s(e){return JSON.parse(e)}function u(e){return JSON.stringify(e)}function l(e,t){var n=new oe(e,t);return n.subscribe.bind(n)}function c(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}}function h(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o in e&&"function"===typeof e[o])return!0}return!1}function p(){}function f(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=r+" argument "}function d(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(f(e,t,r)+"must be a valid firebase namespace.")}function y(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(f(e,t,r)+"must be a valid function.")}function v(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(f(e,t,r)+"must be a valid context object.")}Object.defineProperty(t,"__esModule",{value:!0});var _=n(10),g={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},m=function(e,t){if(!e)throw b(t)},b=function(e){return new Error("Firebase Database ("+g.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},C=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},E=function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){var i=e[n++],a=e[n++],s=e[n++],u=((7&o)<<18|(63&i)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{var i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")},w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],o=0;o<e.length;o+=3){var i=e[o],a=o+1<e.length,s=a?e[o+1]:0,u=o+2<e.length,l=u?e[o+2]:0,c=i>>2,h=(3&i)<<4|s>>4,p=(15&s)<<2|l>>6,f=63&l;u||(f=64,a||(p=64)),r.push(n[c],n[h],n[p],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(C(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):E(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],o=0;o<e.length;){var i=n[e.charAt(o++)],a=o<e.length,s=a?n[e.charAt(o)]:0;++o;var u=o<e.length,l=u?n[e.charAt(o)]:64;++o;var c=o<e.length,h=c?n[e.charAt(o)]:64;if(++o,null==i||null==s||null==l||null==h)throw Error();var p=i<<2|s>>4;if(r.push(p),64!=l){var f=s<<4&240|l>>2;if(r.push(f),64!=h){var d=l<<6&192|h;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},T=function(e){var t=C(e);return w.encodeByteArray(t,!0)},S=function(e){try{return w.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},k=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}(),N=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""},R=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N())},P=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},x=function(){return!0===g.NODE_CLIENT||!0===g.NODE_ADMIN},O="FirebaseError",I=Error.captureStackTrace,A=function(){function e(e,t){if(this.code=e,this.message=t,I)I(this,D.prototype.create);else try{throw Error.apply(this,arguments)}catch(e){this.name=O,Object.defineProperty(this,"stack",{get:function(){return e.stack}})}}return e}();A.prototype=Object.create(Error.prototype),A.prototype.constructor=A,A.prototype.name=O;var D=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],o=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+o+").";var i=new A(o,n);for(var a in t)t.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(i[a]=t[a]);return i},e}(),F=function(e){var t={},n={},r={},o="";try{var i=e.split(".");t=s(S(i[0])||""),n=s(S(i[1])||""),o=i[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:o}},L=function(e){var t,n,r=F(e).claims,o=Math.floor((new Date).getTime()/1e3);return"object"===typeof r&&(r.hasOwnProperty("nbf")?t=r.nbf:r.hasOwnProperty("iat")&&(t=r.iat),n=r.hasOwnProperty("exp")?r.exp:t+86400),o&&t&&n&&o>=t&&o<=n},M=function(e){var t=F(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},U=function(e){var t=F(e),n=t.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},j=function(e){var t=F(e).claims;return"object"===typeof t&&!0===t.admin},W=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},B=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},H=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},V=function(e,t){return H(t,function(t,n){e[t]=n}),e},q=function(e){return V({},e)},Q=function(e){return"object"===typeof e&&null!==e},z=function(e){for(var t in e)return!1;return!0},K=function(e){var t=0;for(var n in e)t++;return t},G=function(e,t,n){var r={};for(var o in e)r[o]=t.call(n,e[o],o,e);return r},Y=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},X=function(e,t,n){var r=Y(e,t,n);return r&&e[r]},$=function(e){for(var t in e)return t},J=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},Z=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0},ee=function(e){var t=[];return H(e,function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},te=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},ne=function(){function e(){this.blockSize=-1}return e}(),re=function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}return _.__extends(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var r=16;r<80;r++){var o=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(o<<1|o>>>31)}for(var i,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4],r=0;r<80;r++){r<40?r<20?(i=c^u&(l^c),a=1518500249):(i=u^l^c,a=1859775393):r<60?(i=u&l|c&(u|l),a=2400959708):(i=u^l^c,a=3395469782);var o=(s<<5|s>>>27)+i+h+a+n[r]&4294967295;h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,i=this.inbuf_;r<t;){if(0==i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(o[i]=e.charCodeAt(r),++i,++r,i==this.blockSize){this.compress_(o),i=0;break}}else for(;r<t;)if(o[i]=e[r],++i,++r,i==this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[n]>>o&255,++r;return e},t}(ne),oe=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=h(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=p),void 0===r.error&&(r.error=p),void 0===r.complete&&(r.complete=p);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}}),this.observers.push(r),i},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!==typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}(),ie=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o){var i=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".";throw new Error(i)}},ae=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=55296&&o<=56319){var i=o-55296;r++,m(r<e.length,"Surrogate pair missing trail surrogate.");o=65536+(i<<10)+(e.charCodeAt(r)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},se=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};t.assert=m,t.assertionError=b,t.base64=w,t.base64Decode=S,t.base64Encode=T,t.CONSTANTS=g,t.deepCopy=r,t.deepExtend=o,t.patchProperty=i,t.Deferred=k,t.getUA=N,t.isMobileCordova=R,t.isNodeSdk=x,t.isReactNative=P,t.ErrorFactory=D,t.FirebaseError=A,t.patchCapture=a,t.jsonEval=s,t.stringify=u,t.decode=F,t.isAdmin=j,t.issuedAtTime=M,t.isValidFormat=U,t.isValidTimestamp=L,t.clone=q,t.contains=W,t.every=Z,t.extend=V,t.findKey=Y,t.findValue=X,t.forEach=H,t.getAnyKey=$,t.getCount=K,t.getValues=J,t.isEmpty=z,t.isNonNullObject=Q,t.map=G,t.safeGet=B,t.querystring=ee,t.querystringDecode=te,t.Sha1=re,t.async=c,t.createSubscribe=l,t.errorPrefix=f,t.validateArgCount=ie,t.validateCallback=y,t.validateContextObject=v,t.validateNamespace=d,t.stringLength=se,t.stringToByteArray=ae},function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n}function i(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function l(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function c(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function f(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function d(e){return this instanceof d?(this.v=e,this):new d(e)}function y(e,t,n){function r(e){c[e]&&(l[e]=function(t){return new Promise(function(n,r){h.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{i(c[e](t))}catch(e){u(h[0][3],e)}}function i(e){e.value instanceof d?Promise.resolve(e.value.v).then(a,s):u(h[0][2],e)}function a(e){o("next",e)}function s(e){o("throw",e)}function u(e,t){e(t),h.shift(),h.length&&o(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,c=n.apply(e,t||[]),h=[];return l={},r("next"),r("throw"),r("return"),l[Symbol.asyncIterator]=function(){return this},l}function v(e){function t(t,o){e[t]&&(n[t]=function(n){return(r=!r)?{value:d(e[t](n)),done:"return"===t}:o?o(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"===typeof h?h(e):e[Symbol.iterator]()}function g(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function b(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=r,n.d(t,"__assign",function(){return E}),t.__rest=o,t.__decorate=i,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=l,t.__exportStar=c,t.__values=h,t.__read=p,t.__spread=f,t.__await=d,t.__asyncGenerator=y,t.__asyncDelegator=v,t.__asyncValues=_,t.__makeTemplateObject=g,t.__importStar=m,t.__importDefault=b;var C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}},function(e,t,n){n(12),e.exports=n(17)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(13).enable(),window.Promise=n(15)),n(16),Object.assign=n(1)},function(e,t,n){"use strict";function r(){l=!1,s._47=null,s._71=null}function o(e){function t(t){(e.allRejections||a(h[t].error,e.whitelist||u))&&(h[t].displayId=c++,e.onUnhandled?(h[t].logged=!0,e.onUnhandled(h[t].displayId,h[t].error)):(h[t].logged=!0,i(h[t].displayId,h[t].error)))}function n(t){h[t].logged&&(e.onHandled?e.onHandled(h[t].displayId,h[t].error):h[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+h[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+h[t].displayId+".")))}e=e||{},l&&r(),l=!0;var o=0,c=0,h={};s._47=function(e){2===e._83&&h[e._56]&&(h[e._56].logged?n(e._56):clearTimeout(h[e._56].timeout),delete h[e._56])},s._71=function(e,n){0===e._75&&(e._56=o++,h[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),a(n,u)?100:2e3),logged:!1})}}function i(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function a(e,t){return t.some(function(t){return e instanceof t})}var s=n(5),u=[ReferenceError,TypeError,RangeError],l=!1;t.disable=r,t.enable=o},function(e,t,n){"use strict";(function(t){function n(e){a.length||(i(),s=!0),a[a.length]=e}function r(){for(;u<a.length;){var e=u;if(u+=1,a[e].call(),u>l){for(var t=0,n=a.length-u;t<n;t++)a[t]=a[t+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var i,a=[],s=!1,u=0,l=1024,c="undefined"!==typeof t?t:self,h=c.MutationObserver||c.WebKitMutationObserver;i="function"===typeof h?function(e){var t=1,n=new h(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):o(r),n.requestFlush=i,n.makeRequestCallFromTimer=o}).call(t,n(0))},function(e,t,n){"use strict";function r(e){var t=new o(o._44);return t._83=1,t._18=e,t}var o=n(5);e.exports=o;var i=r(!0),a=r(!1),s=r(null),u=r(void 0),l=r(0),c=r("");o.resolve=function(e){if(e instanceof o)return e;if(null===e)return s;if(void 0===e)return u;if(!0===e)return i;if(!1===e)return a;if(0===e)return l;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new o(t.bind(e))}catch(e){return new o(function(t,n){n(e)})}return r(e)},o.all=function(e){var t=Array.prototype.slice.call(e);return new o(function(e,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(a,e)},n))}var u=s.then;if("function"===typeof u){return void new o(u.bind(s)).then(function(e){r(a,e)},n)}}t[a]=s,0===--i&&e(t)}if(0===t.length)return e([]);for(var i=t.length,a=0;a<t.length;a++)r(a,t[a])})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){e.forEach(function(e){o.resolve(e).then(t,n)})})},o.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(_.arrayBuffer&&_.blob&&m(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return C.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(_.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},_.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];v.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=v,e.fetch=function(e,t){return new Promise(function(n,r){var o=new f(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new v(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&_.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n.n(r),i=n(19),a=n.n(i),s=n(29),u=(n.n(s),n(30)),l=n(7),c=n.n(l),h={apiKey:"AIzaSyB85k77rCqbGvLh7yTibvw31LEVRRocJH4",authDomain:"fir-storage-6a6d4.firebaseapp.com",databaseURL:"https://fir-storage-6a6d4.firebaseio.com",projectId:"fir-storage-6a6d4",storageBucket:"fir-storage-6a6d4.appspot.com",messagingSenderId:"357172934329"};c.a.initializeApp(h),a.a.render(o.a.createElement(u.a,null),document.getElementById("root"))},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function o(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||R}function i(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||R}function a(){}function s(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||R}function u(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)I.call(t,r)&&!A.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:E,type:e,key:i,ref:a,props:o,_owner:O.current}}function l(e){return"object"===typeof e&&null!==e&&e.$$typeof===E}function c(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function h(e,t,n,r){if(F.length){var o=F.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function p(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>F.length&&F.push(e)}function f(e,t,n,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case E:case w:case T:case S:a=!0}}if(a)return n(o,e,""===t?"."+d(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){i=e[s];var u=t+d(i,s);a+=f(i,u,n,o)}else if(null===e||"undefined"===typeof e?u=null:(u=N&&e[N]||e["@@iterator"],u="function"===typeof u?u:null),"function"===typeof u)for(e=u.call(e),s=0;!(i=e.next()).done;)i=i.value,u=t+d(i,s++),a+=f(i,u,n,o);else"object"===i&&(n=""+e,r("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return a}function d(e,t){return"object"===typeof e&&null!==e&&null!=e.key?c(e.key):t.toString(36)}function y(e,t){e.func.call(e.context,t,e.count++)}function v(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?_(e,r,n,b.thatReturnsArgument):null!=e&&(l(e)&&(t=o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(D,"$&/")+"/")+n,e={$$typeof:E,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function _(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(D,"$&/")+"/"),t=h(t,i,r,o),null==e||f(e,"",v,t),p(t)}var g=n(1),m=n(6),b=n(3),C="function"===typeof Symbol&&Symbol.for,E=C?Symbol.for("react.element"):60103,w=C?Symbol.for("react.call"):60104,T=C?Symbol.for("react.return"):60105,S=C?Symbol.for("react.portal"):60106,k=C?Symbol.for("react.fragment"):60107,N="function"===typeof Symbol&&Symbol.iterator,R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};o.prototype.isReactComponent={},o.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e,t,"setState")},o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=o.prototype;var P=i.prototype=new a;P.constructor=i,g(P,o.prototype),P.isPureReactComponent=!0;var x=s.prototype=new a;x.constructor=s,g(x,o.prototype),x.unstable_isAsyncReactComponent=!0,x.render=function(){return this.props.children};var O={current:null},I=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0},D=/\/+/g,F=[],L={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return _(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=h(null,null,t,n),null==e||f(e,"",y,t),p(t)},count:function(e){return null==e?0:f(e,"",b.thatReturnsNull,null)},toArray:function(e){var t=[];return _(e,t,null,b.thatReturnsArgument),t},only:function(e){return l(e)||r("143"),e}},Component:o,PureComponent:i,unstable_AsyncComponent:s,Fragment:k,createElement:u,cloneElement:function(e,t,n){var r=g({},e.props),o=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=O.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)I.call(t,u)&&!A.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:E,type:e.type,key:o,ref:i,props:r,_owner:a}},createFactory:function(e){var t=u.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:O,assign:g}},M=Object.freeze({default:L}),U=M&&L||M;e.exports=U.default?U.default:U},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(20)},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function o(e,t){return(e&t)===t}function i(e,t){if(Pn.hasOwnProperty(e)||2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return Pn.hasOwnProperty(e)?e=!0:(t=a(e))?e=t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:(e=e.toLowerCase().slice(0,5),e="data-"===e||"aria-"===e),e;case"undefined":case"number":case"string":case"object":return!0;default:return!1}}function a(e){return On.hasOwnProperty(e)?On[e]:null}function s(e){return e[1].toUpperCase()}function u(e,t,n,r,o,i,a,s,u){qn._hasCaughtError=!1,qn._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){qn._caughtError=e,qn._hasCaughtError=!0}}function l(){if(qn._hasRethrowError){var e=qn._rethrowError;throw qn._rethrowError=null,qn._hasRethrowError=!1,e}}function c(){if(Qn)for(var e in zn){var t=zn[e],n=Qn.indexOf(e);if(-1<n||r("96",e),!Kn[n]){t.extractEvents||r("97",e),Kn[n]=t,n=t.eventTypes;for(var o in n){var i=void 0,a=n[o],s=t,u=o;Gn.hasOwnProperty(u)&&r("99",u),Gn[u]=a;var l=a.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&h(l[i],s,u);i=!0}else a.registrationName?(h(a.registrationName,s,u),i=!0):i=!1;i||r("98",o,e)}}}}function h(e,t,n){Yn[e]&&r("100",e),Yn[e]=t,Xn[e]=t.eventTypes[n].dependencies}function p(e){Qn&&r("101"),Qn=Array.prototype.slice.call(e),c()}function f(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var o=e[t];zn.hasOwnProperty(t)&&zn[t]===o||(zn[t]&&r("102",t),zn[t]=o,n=!0)}n&&c()}function d(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=er(r),qn.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function y(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function v(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function _(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var o=0;o<n.length&&!e.isPropagationStopped();o++)d(e,t,n[o],r[o]);else n&&d(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function g(e){return _(e,!0)}function m(e){return _(e,!1)}function b(e,t){var n=e.stateNode;if(!n)return null;var o=Jn(n);if(!o)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(o=!o.disabled)||(e=e.type,o=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&r("231",t,typeof n),n)}function C(e,t,n,r){for(var o,i=0;i<Kn.length;i++){var a=Kn[i];a&&(a=a.extractEvents(e,t,n,r))&&(o=y(o,a))}return o}function E(e){e&&(tr=y(tr,e))}function w(e){var t=tr;tr=null,t&&(e?v(t,g):v(t,m),tr&&r("95"),qn.rethrowCaughtError())}function T(e){if(e[ir])return e[ir];for(var t=[];!e[ir];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=void 0,r=e[ir];if(5===r.tag||6===r.tag)return r;for(;e&&(r=e[ir]);e=t.pop())n=r;return n}function S(e){if(5===e.tag||6===e.tag)return e.stateNode;r("33")}function k(e){return e[ar]||null}function N(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function R(e,t,n){for(var r=[];e;)r.push(e),e=N(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function P(e,t,n){(t=b(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=y(n._dispatchListeners,t),n._dispatchInstances=y(n._dispatchInstances,e))}function x(e){e&&e.dispatchConfig.phasedRegistrationNames&&R(e._targetInst,P,e)}function O(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?N(t):null,R(t,P,e)}}function I(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=b(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=y(n._dispatchListeners,t),n._dispatchInstances=y(n._dispatchInstances,e))}function A(e){e&&e.dispatchConfig.registrationName&&I(e._targetInst,null,e)}function D(e){v(e,x)}function F(e,t,n,r){if(n&&r)e:{for(var o=n,i=r,a=0,s=o;s;s=N(s))a++;s=0;for(var u=i;u;u=N(u))s++;for(;0<a-s;)o=N(o),a--;for(;0<s-a;)i=N(i),s--;for(;a--;){if(o===i||o===i.alternate)break e;o=N(o),i=N(i)}o=null}else o=null;for(i=o,o=[];n&&n!==i&&(null===(a=n.alternate)||a!==i);)o.push(n),n=N(n);for(n=[];r&&r!==i&&(null===(a=r.alternate)||a!==i);)n.push(r),r=N(r);for(r=0;r<o.length;r++)I(o[r],"bubbled",e);for(e=n.length;0<e--;)I(n[e],"captured",t)}function L(){return!lr&&bn.canUseDOM&&(lr="textContent"in document.documentElement?"textContent":"innerText"),lr}function M(){if(cr._fallbackText)return cr._fallbackText;var e,t,n=cr._startText,r=n.length,o=U(),i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return cr._fallbackText=o.slice(e,1<t?1-t:void 0),cr._fallbackText}function U(){return"value"in cr._root?cr._root.value:cr._root[L()]}function j(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var o in e)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?En.thatReturnsTrue:En.thatReturnsFalse,this.isPropagationStopped=En.thatReturnsFalse,this}function W(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function B(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function H(e){e.eventPool=[],e.getPooled=W,e.release=B}function V(e,t,n,r){return j.call(this,e,t,n,r)}function q(e,t,n,r){return j.call(this,e,t,n,r)}function Q(e,t){switch(e){case"topKeyUp":return-1!==fr.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function z(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function K(e,t){switch(e){case"topCompositionEnd":return z(t);case"topKeyPress":return 32!==t.which?null:(wr=!0,Cr);case"topTextInput":return e=t.data,e===Cr&&wr?null:e;default:return null}}function G(e,t){if(Tr)return"topCompositionEnd"===e||!dr&&Q(e,t)?(e=M(),cr._root=null,cr._startText=null,cr._fallbackText=null,Tr=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return br?null:t.data;default:return null}}function Y(e){if(e=Zn(e)){kr&&"function"===typeof kr.restoreControlledState||r("194");var t=Jn(e.stateNode);kr.restoreControlledState(e.stateNode,e.type,t)}}function X(e){Nr?Rr?Rr.push(e):Rr=[e]:Nr=e}function $(){if(Nr){var e=Nr,t=Rr;if(Rr=Nr=null,Y(e),t)for(e=0;e<t.length;e++)Y(t[e])}}function J(e,t){return e(t)}function Z(e,t){if(Or)return J(e,t);Or=!0;try{return J(e,t)}finally{Or=!1,$()}}function ee(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ir[e.type]:"textarea"===t}function te(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ne(e,t){if(!bn.canUseDOM||t&&!("addEventListener"in document))return!1;t="on"+e;var n=t in document;return n||(n=document.createElement("div"),n.setAttribute(t,"return;"),n="function"===typeof n[t]),!n&&gr&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function re(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function oe(e){var t=re(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function ie(e){e._valueTracker||(e._valueTracker=oe(e))}function ae(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=re(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function se(e,t,n){return e=j.getPooled(Ar.change,e,t,n),e.type="change",X(n),D(e),e}function ue(e){E(e),w(!1)}function le(e){if(ae(S(e)))return e}function ce(e,t){if("topChange"===e)return t}function he(){Dr&&(Dr.detachEvent("onpropertychange",pe),Fr=Dr=null)}function pe(e){"value"===e.propertyName&&le(Fr)&&(e=se(Fr,e,te(e)),Z(ue,e))}function fe(e,t,n){"topFocus"===e?(he(),Dr=t,Fr=n,Dr.attachEvent("onpropertychange",pe)):"topBlur"===e&&he()}function de(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return le(Fr)}function ye(e,t){if("topClick"===e)return le(t)}function ve(e,t){if("topInput"===e||"topChange"===e)return le(t)}function _e(e,t,n,r){return j.call(this,e,t,n,r)}function ge(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ur[e])&&!!t[e]}function me(){return ge}function be(e,t,n,r){return j.call(this,e,t,n,r)}function Ce(e){return e=e.type,"string"===typeof e?e:"function"===typeof e?e.displayName||e.name:null}function Ee(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function we(e){return!!(e=e._reactInternalFiber)&&2===Ee(e)}function Te(e){2!==Ee(e)&&r("188")}function Se(e){var t=e.alternate;if(!t)return t=Ee(e),3===t&&r("188"),1===t?null:e;for(var n=e,o=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var s=i.child;s;){if(s===n)return Te(i),e;if(s===o)return Te(i),t;s=s.sibling}r("188")}if(n.return!==o.return)n=i,o=a;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,o=a;break}if(u===o){s=!0,o=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,o=i;break}if(u===o){s=!0,o=a,n=i;break}u=u.sibling}s||r("189")}}n.alternate!==o&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?e:t}function ke(e){if(!(e=Se(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ne(e){if(!(e=Se(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Re(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=T(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],qr(e.topLevelType,t,e.nativeEvent,te(e.nativeEvent))}function Pe(e){Vr=!!e}function xe(e,t,n){return n?wn.listen(n,t,Ie.bind(null,e)):null}function Oe(e,t,n){return n?wn.capture(n,t,Ie.bind(null,e)):null}function Ie(e,t){if(Vr){var n=te(t);if(n=T(n),null===n||"number"!==typeof n.tag||2===Ee(n)||(n=null),Hr.length){var r=Hr.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Z(Re,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Hr.length&&Hr.push(e)}}}function Ae(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function De(e){if(Kr[e])return Kr[e];if(!zr[e])return e;var t,n=zr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Gr)return Kr[e]=n[t];return""}function Fe(e){return Object.prototype.hasOwnProperty.call(e,Jr)||(e[Jr]=$r++,Xr[e[Jr]]={}),Xr[e[Jr]]}function Le(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Me(e,t){var n=Le(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Le(n)}}function Ue(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}function je(e,t){if(oo||null==to||to!==Tn())return null;var n=to;return"selectionStart"in n&&Ue(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,ro&&Sn(ro,n)?null:(ro=n,e=j.getPooled(eo.select,no,e,t),e.type="select",e.target=to,D(e),e)}function We(e,t,n,r){return j.call(this,e,t,n,r)}function Be(e,t,n,r){return j.call(this,e,t,n,r)}function He(e,t,n,r){return j.call(this,e,t,n,r)}function Ve(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}function qe(e,t,n,r){return j.call(this,e,t,n,r)}function Qe(e,t,n,r){return j.call(this,e,t,n,r)}function ze(e,t,n,r){return j.call(this,e,t,n,r)}function Ke(e,t,n,r){return j.call(this,e,t,n,r)}function Ge(e,t,n,r){return j.call(this,e,t,n,r)}function Ye(e){0>po||(e.current=ho[po],ho[po]=null,po--)}function Xe(e,t){po++,ho[po]=e.current,e.current=t}function $e(e){return Ze(e)?vo:fo.current}function Je(e,t){var n=e.type.contextTypes;if(!n)return Rn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ze(e){return 2===e.tag&&null!=e.type.childContextTypes}function et(e){Ze(e)&&(Ye(yo,e),Ye(fo,e))}function tt(e,t,n){null!=fo.cursor&&r("168"),Xe(fo,t,e),Xe(yo,n,e)}function nt(e,t){var n=e.stateNode,o=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var i in n)i in o||r("108",Ce(e)||"Unknown",i);return Cn({},t,n)}function rt(e){if(!Ze(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Rn,vo=fo.current,Xe(fo,t,e),Xe(yo,yo.current,e),!0}function ot(e,t){var n=e.stateNode;if(n||r("169"),t){var o=nt(e,vo);n.__reactInternalMemoizedMergedChildContext=o,Ye(yo,e),Ye(fo,e),Xe(fo,o,e)}else Ye(yo,e);Xe(yo,t,e)}function it(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function at(e,t,n){var r=e.alternate;return null===r?(r=new it(e.tag,e.key,e.internalContextTag),r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.pendingProps=t,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function st(e,t,n){var o=void 0,i=e.type,a=e.key;return"function"===typeof i?(o=i.prototype&&i.prototype.isReactComponent?new it(2,a,t):new it(0,a,t),o.type=i,o.pendingProps=e.props):"string"===typeof i?(o=new it(5,a,t),o.type=i,o.pendingProps=e.props):"object"===typeof i&&null!==i&&"number"===typeof i.tag?(o=i,o.pendingProps=e.props):r("130",null==i?i:typeof i,""),o.expirationTime=n,o}function ut(e,t,n,r){return t=new it(10,r,t),t.pendingProps=e,t.expirationTime=n,t}function lt(e,t,n){return t=new it(6,null,t),t.pendingProps=e,t.expirationTime=n,t}function ct(e,t,n){return t=new it(7,e.key,t),t.type=e.handler,t.pendingProps=e,t.expirationTime=n,t}function ht(e,t,n){return e=new it(9,null,t),e.expirationTime=n,e}function pt(e,t,n){return t=new it(4,e.key,t),t.pendingProps=e.children||[],t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ft(e){return function(t){try{return e(t)}catch(e){}}}function dt(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);_o=ft(function(e){return t.onCommitFiberRoot(n,e)}),go=ft(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function yt(e){"function"===typeof _o&&_o(e)}function vt(e){"function"===typeof go&&go(e)}function _t(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1}}function gt(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}function mt(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=_t(null)),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=_t(null)):e=null,e=e!==r?e:null,null===e?gt(r,t):null===r.last||null===e.last?(gt(r,t),gt(e,t)):(gt(r,t),e.last=t)}function bt(e,t,n,r){return e=e.partialState,"function"===typeof e?e.call(t,n,r):e}function Ct(e,t,n,r,o,i){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var a=!0,s=n.first,u=!1;null!==s;){var l=s.expirationTime;if(l>i){var c=n.expirationTime;(0===c||c>l)&&(n.expirationTime=l),u||(u=!0,n.baseState=e)}else u||(n.first=s.next,null===n.first&&(n.last=null)),s.isReplace?(e=bt(s,r,e,o),a=!0):(l=bt(s,r,e,o))&&(e=a?Cn({},e,l):Cn(e,l),a=!1),s.isForced&&(n.hasForceUpdate=!0),null!==s.callback&&(l=n.callbackList,null===l&&(l=n.callbackList=[]),l.push(s));s=s.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||(t.updateQueue=null),u||(n.baseState=e),e}function Et(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var o=n[e],i=o.callback;o.callback=null,"function"!==typeof i&&r("191",i),i.call(t)}}function wt(e,t,n,o){function i(e,t){t.updater=a,e.stateNode=t,t._reactInternalFiber=e}var a={isMounted:we,enqueueSetState:function(n,r,o){n=n._reactInternalFiber,o=void 0===o?null:o;var i=t(n);mt(n,{expirationTime:i,partialState:r,callback:o,isReplace:!1,isForced:!1,nextCallback:null,next:null}),e(n,i)},enqueueReplaceState:function(n,r,o){n=n._reactInternalFiber,o=void 0===o?null:o;var i=t(n);mt(n,{expirationTime:i,partialState:r,callback:o,isReplace:!0,isForced:!1,nextCallback:null,next:null}),e(n,i)},enqueueForceUpdate:function(n,r){n=n._reactInternalFiber,r=void 0===r?null:r;var o=t(n);mt(n,{expirationTime:o,partialState:null,callback:r,isReplace:!1,isForced:!0,nextCallback:null,next:null}),e(n,o)}};return{adoptClassInstance:i,constructClassInstance:function(e,t){var n=e.type,r=$e(e),o=2===e.tag&&null!=e.type.contextTypes,a=o?Je(e,r):Rn;return t=new n(t,a),i(e,t),o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t},mountClassInstance:function(e,t){var n=e.alternate,o=e.stateNode,i=o.state||null,s=e.pendingProps;s||r("158");var u=$e(e);o.props=s,o.state=e.memoizedState=i,o.refs=Rn,o.context=Je(e,u),null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=1),"function"===typeof o.componentWillMount&&(i=o.state,o.componentWillMount(),i!==o.state&&a.enqueueReplaceState(o,o.state,null),null!==(i=e.updateQueue)&&(o.state=Ct(n,e,i,o,s,t))),"function"===typeof o.componentDidMount&&(e.effectTag|=4)},updateClassInstance:function(e,t,i){var s=t.stateNode;s.props=t.memoizedProps,s.state=t.memoizedState;var u=t.memoizedProps,l=t.pendingProps;l||null==(l=u)&&r("159");var c=s.context,h=$e(t);if(h=Je(t,h),"function"!==typeof s.componentWillReceiveProps||u===l&&c===h||(c=s.state,s.componentWillReceiveProps(l,h),s.state!==c&&a.enqueueReplaceState(s,s.state,null)),c=t.memoizedState,i=null!==t.updateQueue?Ct(e,t,t.updateQueue,s,l,i):c,!(u!==l||c!==i||yo.current||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),!1;var p=l;if(null===u||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)p=!0;else{var f=t.stateNode,d=t.type;p="function"===typeof f.shouldComponentUpdate?f.shouldComponentUpdate(p,i,h):!d.prototype||!d.prototype.isPureReactComponent||(!Sn(u,p)||!Sn(c,i))}return p?("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(l,i,h),"function"===typeof s.componentDidUpdate&&(t.effectTag|=4)):("function"!==typeof s.componentDidUpdate||u===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),n(t,l),o(t,i)),s.props=l,s.state=i,s.context=h,p}}}function Tt(e){return null===e||"undefined"===typeof e?null:(e=So&&e[So]||e["@@iterator"],"function"===typeof e?e:null)}function St(e,t){var n=t.ref;if(null!==n&&"function"!==typeof n){if(t._owner){t=t._owner;var o=void 0;t&&(2!==t.tag&&r("110"),o=t.stateNode),o||r("147",n);var i=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===i?e.ref:(e=function(e){var t=o.refs===Rn?o.refs={}:o.refs;null===e?delete t[i]:t[i]=e},e._stringRef=i,e)}"string"!==typeof n&&r("148"),t._owner||r("149",n)}return n}function kt(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Nt(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return e=at(e,t,n),e.index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?(t=lt(n,e.internalContextTag,r),t.return=e,t):(t=i(t,n,r),t.return=e,t)}function l(e,t,n,r){return null!==t&&t.type===n.type?(r=i(t,n.props,r),r.ref=St(t,n),r.return=e,r):(r=st(n,e.internalContextTag,r),r.ref=St(t,n),r.return=e,r)}function c(e,t,n,r){return null===t||7!==t.tag?(t=ct(n,e.internalContextTag,r),t.return=e,t):(t=i(t,n,r),t.return=e,t)}function h(e,t,n,r){return null===t||9!==t.tag?(t=ht(n,e.internalContextTag,r),t.type=n.value,t.return=e,t):(t=i(t,null,r),t.type=n.value,t.return=e,t)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=pt(n,e.internalContextTag,r),t.return=e,t):(t=i(t,n.children||[],r),t.return=e,t)}function f(e,t,n,r,o){return null===t||10!==t.tag?(t=ut(n,e.internalContextTag,r,o),t.return=e,t):(t=i(t,n,r),t.return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return t=lt(""+t,e.internalContextTag,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case bo:return t.type===To?(t=ut(t.props.children,e.internalContextTag,n,t.key),t.return=e,t):(n=st(t,e.internalContextTag,n),n.ref=St(null,t),n.return=e,n);case Co:return t=ct(t,e.internalContextTag,n),t.return=e,t;case Eo:return n=ht(t,e.internalContextTag,n),n.type=t.value,n.return=e,n;case wo:return t=pt(t,e.internalContextTag,n),t.return=e,t}if(ko(t)||Tt(t))return t=ut(t,e.internalContextTag,n,null),t.return=e,t;kt(e,t)}return null}function y(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==o?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case bo:return n.key===o?n.type===To?f(e,t,n.props.children,r,o):l(e,t,n,r):null;case Co:return n.key===o?c(e,t,n,r):null;case Eo:return null===o?h(e,t,n,r):null;case wo:return n.key===o?p(e,t,n,r):null}if(ko(n)||Tt(n))return null!==o?null:f(e,t,n,r,null);kt(e,n)}return null}function v(e,t,n,r,o){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,u(t,e,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case bo:return e=e.get(null===r.key?n:r.key)||null,r.type===To?f(t,e,r.props.children,o,r.key):l(t,e,r,o);case Co:return e=e.get(null===r.key?n:r.key)||null,c(t,e,r,o);case Eo:return e=e.get(n)||null,h(t,e,r,o);case wo:return e=e.get(null===r.key?n:r.key)||null,p(t,e,r,o)}if(ko(r)||Tt(r))return e=e.get(n)||null,f(t,e,r,o,null);kt(t,r)}return null}function _(r,i,s,u){for(var l=null,c=null,h=i,p=i=0,f=null;null!==h&&p<s.length;p++){h.index>p?(f=h,h=null):f=h.sibling;var _=y(r,h,s[p],u);if(null===_){null===h&&(h=f);break}e&&h&&null===_.alternate&&t(r,h),i=a(_,i,p),null===c?l=_:c.sibling=_,c=_,h=f}if(p===s.length)return n(r,h),l;if(null===h){for(;p<s.length;p++)(h=d(r,s[p],u))&&(i=a(h,i,p),null===c?l=h:c.sibling=h,c=h);return l}for(h=o(r,h);p<s.length;p++)(f=v(h,r,p,s[p],u))&&(e&&null!==f.alternate&&h.delete(null===f.key?p:f.key),i=a(f,i,p),null===c?l=f:c.sibling=f,c=f);return e&&h.forEach(function(e){return t(r,e)}),l}function g(i,s,u,l){var c=Tt(u);"function"!==typeof c&&r("150"),null==(u=c.call(u))&&r("151");for(var h=c=null,p=s,f=s=0,_=null,g=u.next();null!==p&&!g.done;f++,g=u.next()){p.index>f?(_=p,p=null):_=p.sibling;var m=y(i,p,g.value,l);if(null===m){p||(p=_);break}e&&p&&null===m.alternate&&t(i,p),s=a(m,s,f),null===h?c=m:h.sibling=m,h=m,p=_}if(g.done)return n(i,p),c;if(null===p){for(;!g.done;f++,g=u.next())null!==(g=d(i,g.value,l))&&(s=a(g,s,f),null===h?c=g:h.sibling=g,h=g);return c}for(p=o(i,p);!g.done;f++,g=u.next())null!==(g=v(p,i,f,g.value,l))&&(e&&null!==g.alternate&&p.delete(null===g.key?f:g.key),s=a(g,s,f),null===h?c=g:h.sibling=g,h=g);return e&&p.forEach(function(e){return t(i,e)}),c}return function(e,o,a,u){"object"===typeof a&&null!==a&&a.type===To&&null===a.key&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case bo:e:{var c=a.key;for(l=o;null!==l;){if(l.key===c){if(10===l.tag?a.type===To:l.type===a.type){n(e,l.sibling),o=i(l,a.type===To?a.props.children:a.props,u),o.ref=St(l,a),o.return=e,e=o;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===To?(o=ut(a.props.children,e.internalContextTag,u,a.key),o.return=e,e=o):(u=st(a,e.internalContextTag,u),u.ref=St(o,a),u.return=e,e=u)}return s(e);case Co:e:{for(l=a.key;null!==o;){if(o.key===l){if(7===o.tag){n(e,o.sibling),o=i(o,a,u),o.return=e,e=o;break e}n(e,o);break}t(e,o),o=o.sibling}o=ct(a,e.internalContextTag,u),o.return=e,e=o}return s(e);case Eo:e:{if(null!==o){if(9===o.tag){n(e,o.sibling),o=i(o,null,u),o.type=a.value,o.return=e,e=o;break e}n(e,o)}o=ht(a,e.internalContextTag,u),o.type=a.value,o.return=e,e=o}return s(e);case wo:e:{for(l=a.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(e,o.sibling),o=i(o,a.children||[],u),o.return=e,e=o;break e}n(e,o);break}t(e,o),o=o.sibling}o=pt(a,e.internalContextTag,u),o.return=e,e=o}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==o&&6===o.tag?(n(e,o.sibling),o=i(o,a,u)):(n(e,o),o=lt(a,e.internalContextTag,u)),o.return=e,e=o,s(e);if(ko(a))return _(e,o,a,u);if(Tt(a))return g(e,o,a,u);if(l&&kt(e,a),"undefined"===typeof a)switch(e.tag){case 2:case 1:u=e.type,r("152",u.displayName||u.name||"Component")}return n(e,o)}}function Rt(e,t,n,o,i){function a(e,t,n){var r=t.expirationTime;t.child=null===e?Ro(t,null,n,r):No(t,e.child,n,r)}function s(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=128)}function u(e,t,n,r){if(s(e,t),!n)return r&&ot(t,!1),c(e,t);n=t.stateNode,Br.current=t;var o=n.render();return t.effectTag|=1,a(e,t,o),t.memoizedState=n.state,t.memoizedProps=n.props,r&&ot(t,!0),t.child}function l(e){var t=e.stateNode;t.pendingContext?tt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tt(e,t.context,!1),v(e,t.containerInfo)}function c(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=at(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=at(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}function h(e,t){switch(t.tag){case 3:l(t);break;case 2:rt(t);break;case 4:v(t,t.stateNode.containerInfo)}return null}var p=e.shouldSetTextContent,f=e.useSyncScheduling,d=e.shouldDeprioritizeSubtree,y=t.pushHostContext,v=t.pushHostContainer,_=n.enterHydrationState,g=n.resetHydrationState,m=n.tryToClaimNextHydratableInstance;e=wt(o,i,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var b=e.adoptClassInstance,C=e.constructClassInstance,E=e.mountClassInstance,w=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n)return h(e,t);switch(t.tag){case 0:null!==e&&r("155");var o=t.type,i=t.pendingProps,T=$e(t);return T=Je(t,T),o=o(i,T),t.effectTag|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render?(t.tag=2,i=rt(t),b(t,o),E(t,n),t=u(e,t,!0,i)):(t.tag=1,a(e,t,o),t.memoizedProps=i,t=t.child),t;case 1:e:{if(i=t.type,n=t.pendingProps,o=t.memoizedProps,yo.current)null===n&&(n=o);else if(null===n||o===n){t=c(e,t);break e}o=$e(t),o=Je(t,o),i=i(n,o),t.effectTag|=1,a(e,t,i),t.memoizedProps=n,t=t.child}return t;case 2:return i=rt(t),o=void 0,null===e?t.stateNode?r("153"):(C(t,t.pendingProps),E(t,n),o=!0):o=w(e,t,n),u(e,t,o,i);case 3:return l(t),i=t.updateQueue,null!==i?(o=t.memoizedState,i=Ct(e,t,i,null,null,n),o===i?(g(),t=c(e,t)):(o=i.element,T=t.stateNode,(null===e||null===e.child)&&T.hydrate&&_(t)?(t.effectTag|=2,t.child=Ro(t,null,o,n)):(g(),a(e,t,o)),t.memoizedState=i,t=t.child)):(g(),t=c(e,t)),t;case 5:y(t),null===e&&m(t),i=t.type;var S=t.memoizedProps;return o=t.pendingProps,null===o&&null===(o=S)&&r("154"),T=null!==e?e.memoizedProps:null,yo.current||null!==o&&S!==o?(S=o.children,p(i,o)?S=null:T&&p(i,T)&&(t.effectTag|=16),s(e,t),2147483647!==n&&!f&&d(i,o)?(t.expirationTime=2147483647,t=null):(a(e,t,S),t.memoizedProps=o,t=t.child)):t=c(e,t),t;case 6:return null===e&&m(t),e=t.pendingProps,null===e&&(e=t.memoizedProps),t.memoizedProps=e,null;case 8:t.tag=7;case 7:return i=t.pendingProps,yo.current?null===i&&null===(i=e&&e.memoizedProps)&&r("154"):null!==i&&t.memoizedProps!==i||(i=t.memoizedProps),o=i.children,t.stateNode=null===e?Ro(t,t.stateNode,o,n):No(t,t.stateNode,o,n),t.memoizedProps=i,t.stateNode;case 9:return null;case 4:e:{if(v(t,t.stateNode.containerInfo),i=t.pendingProps,yo.current)null===i&&null==(i=e&&e.memoizedProps)&&r("154");else if(null===i||t.memoizedProps===i){t=c(e,t);break e}null===e?t.child=No(t,null,i,n):a(e,t,i),t.memoizedProps=i,t=t.child}return t;case 10:e:{if(n=t.pendingProps,yo.current)null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=c(e,t);break e}a(e,t,n),t.memoizedProps=n,t=t.child}return t;default:r("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case 2:rt(t);break;case 3:l(t);break;default:r("157")}return t.effectTag|=64,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),0===t.expirationTime||t.expirationTime>n?h(e,t):(t.firstEffect=null,t.lastEffect=null,t.child=null===e?Ro(t,null,null,n):No(t,e.child,null,n),2===t.tag&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}function Pt(e,t,n){function o(e){e.effectTag|=4}var i=e.createInstance,a=e.createTextInstance,s=e.appendInitialChild,u=e.finalizeInitialChildren,l=e.prepareUpdate,c=e.persistence,h=t.getRootHostContainer,p=t.popHostContext,f=t.getHostContext,d=t.popHostContainer,y=n.prepareToHydrateHostInstance,v=n.prepareToHydrateHostTextInstance,_=n.popHydrationState,g=void 0,m=void 0,b=void 0;return e.mutation?(g=function(){},m=function(e,t,n){(t.updateQueue=n)&&o(t)},b=function(e,t,n,r){n!==r&&o(t)}):r(c?"235":"236"),{completeWork:function(e,t,n){var c=t.pendingProps;switch(null===c?c=t.memoizedProps:2147483647===t.expirationTime&&2147483647!==n||(t.pendingProps=null),t.tag){case 1:return null;case 2:return et(t),null;case 3:return d(t),Ye(yo,t),Ye(fo,t),c=t.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==e&&null!==e.child||(_(t),t.effectTag&=-3),g(t),null;case 5:p(t),n=h();var C=t.type;if(null!==e&&null!=t.stateNode){var E=e.memoizedProps,w=t.stateNode,T=f();w=l(w,C,E,c,n,T),m(e,t,w,C,E,c,n),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!c)return null===t.stateNode&&r("166"),null;if(e=f(),_(t))y(t,n,e)&&o(t);else{e=i(C,c,n,e,t);e:for(E=t.child;null!==E;){if(5===E.tag||6===E.tag)s(e,E.stateNode);else if(4!==E.tag&&null!==E.child){E.child.return=E,E=E.child;continue}if(E===t)break;for(;null===E.sibling;){if(null===E.return||E.return===t)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}u(e,C,c,n)&&o(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)b(e,t,e.memoizedProps,c);else{if("string"!==typeof c)return null===t.stateNode&&r("166"),null;e=h(),n=f(),_(t)?v(t)&&o(t):t.stateNode=a(c,e,n,t)}return null;case 7:(c=t.memoizedProps)||r("165"),t.tag=8,C=[];e:for((E=t.stateNode)&&(E.return=t);null!==E;){if(5===E.tag||6===E.tag||4===E.tag)r("247");else if(9===E.tag)C.push(E.type);else if(null!==E.child){E.child.return=E,E=E.child;continue}for(;null===E.sibling;){if(null===E.return||E.return===t)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}return E=c.handler,c=E(c.props,C),t.child=No(t,null!==e?e.child:null,c,n),t.child;case 8:return t.tag=7,null;case 9:case 10:return null;case 4:return d(t),g(t),null;case 0:r("167");default:r("156")}}}}function xt(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function o(e){switch("function"===typeof vt&&vt(e),e.tag){case 2:n(e);var r=e.stateNode;if("function"===typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case 5:n(e);break;case 7:i(e.stateNode);break;case 4:l&&s(e)}}function i(e){for(var t=e;;)if(o(t),null===t.child||l&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function a(e){return 5===e.tag||3===e.tag||4===e.tag}function s(e){for(var t=e,n=!1,a=void 0,s=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case 5:a=n.stateNode,s=!1;break e;case 3:case 4:a=n.stateNode.containerInfo,s=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)i(t),s?m(a,t.stateNode):g(a,t.stateNode);else if(4===t.tag?a=t.stateNode.containerInfo:o(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var u=e.getPublicInstance,l=e.mutation;e=e.persistence,l||r(e?"235":"236");var c=l.commitMount,h=l.commitUpdate,p=l.resetTextContent,f=l.commitTextUpdate,d=l.appendChild,y=l.appendChildToContainer,v=l.insertBefore,_=l.insertInContainerBefore,g=l.removeChild,m=l.removeChildFromContainer;return{commitResetTextContent:function(e){p(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(a(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var o=t=void 0;switch(n.tag){case 5:t=n.stateNode,o=!1;break;case 3:case 4:t=n.stateNode.containerInfo,o=!0;break;default:r("161")}16&n.effectTag&&(p(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)n?o?_(t,i.stateNode,n):v(t,i.stateNode,n):o?y(t,i.stateNode):d(t,i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},commitDeletion:function(e){s(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var o=t.memoizedProps;e=null!==e?e.memoizedProps:o;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&h(n,a,i,e,o,t)}break;case 6:null===t.stateNode&&r("162"),n=t.memoizedProps,f(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:r("163")}},commitLifeCycles:function(e,t){switch(t.tag){case 2:var n=t.stateNode;if(4&t.effectTag)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var o=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(o,e)}t=t.updateQueue,null!==t&&Et(t,n);break;case 3:n=t.updateQueue,null!==n&&Et(n,null!==t.child?t.child.stateNode:null);break;case 5:n=t.stateNode,null===e&&4&t.effectTag&&c(n,t.type,t.memoizedProps,t);break;case 6:case 4:break;default:r("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:t(u(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}function Ot(e){function t(e){return e===Po&&r("174"),e}var n=e.getChildHostContext,o=e.getRootHostContext,i={current:Po},a={current:Po},s={current:Po};return{getHostContext:function(){return t(i.current)},getRootHostContainer:function(){return t(s.current)},popHostContainer:function(e){Ye(i,e),Ye(a,e),Ye(s,e)},popHostContext:function(e){a.current===e&&(Ye(i,e),Ye(a,e))},pushHostContainer:function(e,t){Xe(s,t,e),t=o(t),Xe(a,e,e),Xe(i,t,e)},pushHostContext:function(e){var r=t(s.current),o=t(i.current);r=n(o,e.type,r),o!==r&&(Xe(a,e,e),Xe(i,r,e))},resetHostContainer:function(){i.current=Po,s.current=Po}}}function It(e){function t(e,t){var n=new it(5,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=a(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=s(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function o(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;p=e}var i=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var a=e.canHydrateInstance,s=e.canHydrateTextInstance,u=e.getNextHydratableSibling,l=e.getFirstHydratableChild,c=e.hydrateInstance,h=e.hydrateTextInstance,p=null,f=null,d=!1;return{enterHydrationState:function(e){return f=l(e.stateNode.containerInfo),p=e,d=!0},resetHydrationState:function(){f=p=null,d=!1},tryToClaimNextHydratableInstance:function(e){if(d){var r=f;if(r){if(!n(e,r)){if(!(r=u(r))||!n(e,r))return e.effectTag|=2,d=!1,void(p=e);t(p,f)}p=e,f=l(r)}else e.effectTag|=2,d=!1,p=e}},prepareToHydrateHostInstance:function(e,t,n){return t=c(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return h(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==p)return!1;if(!d)return o(e),d=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!i(n,e.memoizedProps))for(n=f;n;)t(e,n),n=u(n);return o(e),f=p?u(e.stateNode):null,!0}}}function At(e){function t(e){ie=Y=!0;var t=e.stateNode;if(t.current===e&&r("177"),t.isReadyForCommit=!1,Br.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var n=e.firstEffect}else n=e;else n=e.firstEffect;for(q(),Z=n;null!==Z;){var o=!1,i=void 0;try{for(;null!==Z;){var a=Z.effectTag;if(16&a&&A(Z),128&a){var s=Z.alternate;null!==s&&j(s)}switch(-242&a){case 2:D(Z),Z.effectTag&=-3;break;case 6:D(Z),Z.effectTag&=-3,L(Z.alternate,Z);break;case 4:L(Z.alternate,Z);break;case 8:ae=!0,F(Z),ae=!1}Z=Z.nextEffect}}catch(e){o=!0,i=e}o&&(null===Z&&r("178"),u(Z,i),null!==Z&&(Z=Z.nextEffect))}for(Q(),t.current=e,Z=n;null!==Z;){n=!1,o=void 0;try{for(;null!==Z;){var l=Z.effectTag;if(36&l&&M(Z.alternate,Z),128&l&&U(Z),64&l)switch(i=Z,a=void 0,null!==ee&&(a=ee.get(i),ee.delete(i),null==a&&null!==i.alternate&&(i=i.alternate,a=ee.get(i),ee.delete(i))),null==a&&r("184"),i.tag){case 2:i.stateNode.componentDidCatch(a.error,{componentStack:a.componentStack});break;case 3:null===re&&(re=a.error);break;default:r("157")}var c=Z.nextEffect;Z.nextEffect=null,Z=c}}catch(e){n=!0,o=e}n&&(null===Z&&r("178"),u(Z,o),null!==Z&&(Z=Z.nextEffect))}return Y=ie=!1,"function"===typeof yt&&yt(e.stateNode),ne&&(ne.forEach(y),ne=null),null!==re&&(e=re,re=null,w(e)),t=t.current.expirationTime,0===t&&(te=ee=null),t}function n(e){for(;;){var t=I(e.alternate,e,J),n=e.return,r=e.sibling,o=e;if(2147483647===J||2147483647!==o.expirationTime){if(2!==o.tag&&3!==o.tag)var i=0;else i=o.updateQueue,i=null===i?0:i.expirationTime;for(var a=o.child;null!==a;)0!==a.expirationTime&&(0===i||i>a.expirationTime)&&(i=a.expirationTime),a=a.sibling;o.expirationTime=i}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){e.stateNode.isReadyForCommit=!0;break}e=n}return null}function o(e){var t=x(e.alternate,e,J);return null===t&&(t=n(e)),Br.current=null,t}function i(e){var t=O(e.alternate,e,J);return null===t&&(t=n(e)),Br.current=null,t}function a(e){if(null!==ee){if(!(0===J||J>e))if(J<=K)for(;null!==X;)X=l(X)?i(X):o(X);else for(;null!==X&&!E();)X=l(X)?i(X):o(X)}else if(!(0===J||J>e))if(J<=K)for(;null!==X;)X=o(X);else for(;null!==X&&!E();)X=o(X)}function s(e,t){if(Y&&r("243"),Y=!0,e.isReadyForCommit=!1,e!==$||t!==J||null===X){for(;-1<po;)ho[po]=null,po--;vo=Rn,fo.current=Rn,yo.current=!1,R(),$=e,J=t,X=at($.current,null,t)}var n=!1,o=null;try{a(t)}catch(e){n=!0,o=e}for(;n;){if(oe){re=o;break}var s=X;if(null===s)oe=!0;else{var l=u(s,o);if(null===l&&r("183"),!oe){try{for(n=l,o=t,l=n;null!==s;){switch(s.tag){case 2:et(s);break;case 5:N(s);break;case 3:k(s);break;case 4:k(s)}if(s===l||s.alternate===l)break;s=s.return}X=i(n),a(o)}catch(e){n=!0,o=e;continue}break}}}return t=re,oe=Y=!1,re=null,null!==t&&w(t),e.isReadyForCommit?e.current.alternate:null}function u(e,t){var n=Br.current=null,r=!1,o=!1,i=null;if(3===e.tag)n=e,c(e)&&(oe=!0);else for(var a=e.return;null!==a&&null===n;){if(2===a.tag?"function"===typeof a.stateNode.componentDidCatch&&(r=!0,i=Ce(a),n=a,o=!0):3===a.tag&&(n=a),c(a)){if(ae||null!==ne&&(ne.has(a)||null!==a.alternate&&ne.has(a.alternate)))return null;n=null,o=!1}a=a.return}if(null!==n){null===te&&(te=new Set),te.add(n);var s="";a=e;do{e:switch(a.tag){case 0:case 1:case 2:case 5:var u=a._debugOwner,l=a._debugSource,h=Ce(a),p=null;u&&(p=Ce(u)),u=l,h="\n    in "+(h||"Unknown")+(u?" (at "+u.fileName.replace(/^.*[\\\/]/,"")+":"+u.lineNumber+")":p?" (created by "+p+")":"");break e;default:h=""}s+=h,a=a.return}while(a);a=s,e=Ce(e),null===ee&&(ee=new Map),t={componentName:e,componentStack:a,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:i,willRetry:o},ee.set(n,t);try{var f=t.error;f&&f.suppressReactErrorLogging||console.error(f)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}return ie?(null===ne&&(ne=new Set),ne.add(n)):y(n),n}return null===re&&(re=t),null}function l(e){return null!==ee&&(ee.has(e)||null!==e.alternate&&ee.has(e.alternate))}function c(e){return null!==te&&(te.has(e)||null!==e.alternate&&te.has(e.alternate))}function h(){return 20*(1+((v()+100)/20|0))}function p(e){return 0!==G?G:Y?ie?1:J:!V||1&e.internalContextTag?h():1}function f(e,t){return d(e,t,!1)}function d(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!Y&&n===$&&t<J&&(X=$=null,J=0);var o=n,i=t;if(Ee>be&&r("185"),null===o.nextScheduledRoot)o.remainingExpirationTime=i,null===ue?(se=ue=o,o.nextScheduledRoot=o):(ue=ue.nextScheduledRoot=o,ue.nextScheduledRoot=se);else{var a=o.remainingExpirationTime;(0===a||i<a)&&(o.remainingExpirationTime=i)}he||(ge?me&&(pe=o,fe=1,C(pe,fe)):1===i?b(1,null):_(i)),!Y&&n===$&&t<J&&(X=$=null,J=0)}e=e.return}}function y(e){d(e,1,!0)}function v(){return K=2+((W()-z)/10|0)}function _(e){if(0!==le){if(e>le)return;H(ce)}var t=W()-z;le=e,ce=B(m,{timeout:10*(e-2)-t})}function g(){var e=0,t=null;if(null!==ue)for(var n=ue,o=se;null!==o;){var i=o.remainingExpirationTime;if(0===i){if((null===n||null===ue)&&r("244"),o===o.nextScheduledRoot){se=ue=o.nextScheduledRoot=null;break}if(o===se)se=i=o.nextScheduledRoot,ue.nextScheduledRoot=i,o.nextScheduledRoot=null;else{if(o===ue){ue=n,ue.nextScheduledRoot=se,o.nextScheduledRoot=null;break}n.nextScheduledRoot=o.nextScheduledRoot,o.nextScheduledRoot=null}o=n.nextScheduledRoot}else{if((0===e||i<e)&&(e=i,t=o),o===ue)break;n=o,o=o.nextScheduledRoot}}n=pe,null!==n&&n===t?Ee++:Ee=0,pe=t,fe=e}function m(e){b(0,e)}function b(e,t){for(_e=t,g();null!==pe&&0!==fe&&(0===e||fe<=e)&&!de;)C(pe,fe),g();if(null!==_e&&(le=0,ce=-1),0!==fe&&_(fe),_e=null,de=!1,Ee=0,ye)throw e=ve,ve=null,ye=!1,e}function C(e,n){if(he&&r("245"),he=!0,n<=v()){var o=e.finishedWork;null!==o?(e.finishedWork=null,e.remainingExpirationTime=t(o)):(e.finishedWork=null,null!==(o=s(e,n))&&(e.remainingExpirationTime=t(o)))}else o=e.finishedWork,null!==o?(e.finishedWork=null,e.remainingExpirationTime=t(o)):(e.finishedWork=null,null!==(o=s(e,n))&&(E()?e.finishedWork=o:e.remainingExpirationTime=t(o)));he=!1}function E(){return!(null===_e||_e.timeRemaining()>we)&&(de=!0)}function w(e){null===pe&&r("246"),pe.remainingExpirationTime=0,ye||(ye=!0,ve=e)}var T=Ot(e),S=It(e),k=T.popHostContainer,N=T.popHostContext,R=T.resetHostContainer,P=Rt(e,T,S,f,p),x=P.beginWork,O=P.beginFailedWork,I=Pt(e,T,S).completeWork;T=xt(e,u);var A=T.commitResetTextContent,D=T.commitPlacement,F=T.commitDeletion,L=T.commitWork,M=T.commitLifeCycles,U=T.commitAttachRef,j=T.commitDetachRef,W=e.now,B=e.scheduleDeferredCallback,H=e.cancelDeferredCallback,V=e.useSyncScheduling,q=e.prepareForCommit,Q=e.resetAfterCommit,z=W(),K=2,G=0,Y=!1,X=null,$=null,J=0,Z=null,ee=null,te=null,ne=null,re=null,oe=!1,ie=!1,ae=!1,se=null,ue=null,le=0,ce=-1,he=!1,pe=null,fe=0,de=!1,ye=!1,ve=null,_e=null,ge=!1,me=!1,be=1e3,Ee=0,we=1;return{computeAsyncExpiration:h,computeExpirationForFiber:p,scheduleWork:f,batchedUpdates:function(e,t){var n=ge;ge=!0;try{return e(t)}finally{(ge=n)||he||b(1,null)}},unbatchedUpdates:function(e){if(ge&&!me){me=!0;try{return e()}finally{me=!1}}return e()},flushSync:function(e){var t=ge;ge=!0;try{e:{var n=G;G=1;try{var o=e();break e}finally{G=n}o=void 0}return o}finally{ge=t,he&&r("187"),b(1,null)}},deferredUpdates:function(e){var t=G;G=h();try{return e()}finally{G=t}}}}function Dt(e){function t(e){return e=ke(e),null===e?null:e.stateNode}var n=e.getPublicInstance;e=At(e);var o=e.computeAsyncExpiration,i=e.computeExpirationForFiber,a=e.scheduleWork;return{createContainer:function(e,t){var n=new it(3,null,0);return e={current:n,containerInfo:e,pendingChildren:null,remainingExpirationTime:0,isReadyForCommit:!1,finishedWork:null,context:null,pendingContext:null,hydrate:t,nextScheduledRoot:null},n.stateNode=e},updateContainer:function(e,t,n,s){var u=t.current;if(n){n=n._reactInternalFiber;var l;e:{for(2===Ee(n)&&2===n.tag||r("170"),l=n;3!==l.tag;){if(Ze(l)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}(l=l.return)||r("171")}l=l.stateNode.context}n=Ze(n)?nt(n,l):l}else n=Rn;null===t.context?t.context=n:t.pendingContext=n,t=s,t=void 0===t?null:t,s=null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent?o():i(u),mt(u,{expirationTime:s,partialState:{element:e},callback:t,isReplace:!1,isForced:!1,nextCallback:null,next:null}),a(u,s)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return n(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:t,findHostInstanceWithNoPortals:function(e){return e=Ne(e),null===e?null:e.stateNode},injectIntoDevTools:function(e){var n=e.findFiberByHostInstance;return dt(Cn({},e,{findHostInstanceByFiber:function(e){return t(e)},findFiberByHostInstance:function(e){return n?n(e):null}}))}}}function Ft(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wo,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Lt(e){return!!Yo.hasOwnProperty(e)||!Go.hasOwnProperty(e)&&(Ko.test(e)?Yo[e]=!0:(Go[e]=!0,!1))}function Mt(e,t,n){var r=a(t);if(r&&i(t,n)){var o=r.mutationMethod;o?o(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?jt(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(o=r.attributeNamespace)?e.setAttributeNS(o,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else Ut(e,t,i(t,n)?n:null)}function Ut(e,t,n){Lt(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))}function jt(e,t){var n=a(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}function Wt(e,t){var n=t.value,r=t.checked;return Cn({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})}function Bt(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ht(e,t){null!=(t=t.checked)&&Mt(e,"checked",t)}function Vt(e,t){Ht(e,t);var n=t.value;null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(t=parseFloat(e.value)||0,(n!=t||n==t&&e.value!=n)&&(e.value=""+n)):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))}function qt(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function Qt(e){var t="";return mn.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function zt(e,t){return e=Cn({children:void 0},t),(t=Qt(t.children))&&(e.children=t),e}function Kt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Gt(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function Yt(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),Cn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xt(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function $t(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function Jt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function Zt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Zt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function tn(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function nn(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=n,i=t[n];o=null==i||"boolean"===typeof i||""===i?"":r||"number"!==typeof i||0===i||Zo.hasOwnProperty(o)&&Zo[o]?(""+i).trim():i+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}function rn(e,t,n){t&&(ti[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!==typeof t.style&&r("62",n()))}function on(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function an(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=Fe(e);t=Xn[t];for(var r=0;r<t.length;r++){var o=t[r];n.hasOwnProperty(o)&&n[o]||("topScroll"===o?Oe("topScroll","scroll",e):"topFocus"===o||"topBlur"===o?(Oe("topFocus","focus",e),Oe("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===o?(ne("cancel",!0)&&Oe("topCancel","cancel",e),n.topCancel=!0):"topClose"===o?(ne("close",!0)&&Oe("topClose","close",e),n.topClose=!0):Yr.hasOwnProperty(o)&&xe(o,Yr[o],e),n[o]=!0)}}function sn(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===ni&&(r=Zt(e)),r===ni?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function un(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function ln(e,t,n,r){var o=on(t,n);switch(t){case"iframe":case"object":xe("topLoad","load",e);var i=n;break;case"video":case"audio":for(i in oi)oi.hasOwnProperty(i)&&xe(i,oi[i],e);i=n;break;case"source":xe("topError","error",e),i=n;break;case"img":case"image":xe("topError","error",e),xe("topLoad","load",e),i=n;break;case"form":xe("topReset","reset",e),xe("topSubmit","submit",e),i=n;break;case"details":xe("topToggle","toggle",e),i=n;break;case"input":Bt(e,n),i=Wt(e,n),xe("topInvalid","invalid",e),an(r,"onChange");break;case"option":i=zt(e,n);break;case"select":Gt(e,n),i=Cn({},n,{value:void 0}),xe("topInvalid","invalid",e),an(r,"onChange");break;case"textarea":Xt(e,n),i=Yt(e,n),xe("topInvalid","invalid",e),an(r,"onChange");break;default:i=n}rn(t,i,ri);var a,s=i;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];"style"===a?nn(e,u,ri):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&Jo(e,u):"children"===a?"string"===typeof u?("textarea"!==t||""!==u)&&tn(e,u):"number"===typeof u&&tn(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Yn.hasOwnProperty(a)?null!=u&&an(r,a):o?Ut(e,a,u):null!=u&&Mt(e,a,u))}switch(t){case"input":ie(e),qt(e,n);break;case"textarea":ie(e),Jt(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?Kt(e,!!n.multiple,t,!1):null!=n.defaultValue&&Kt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=En)}}function cn(e,t,n,r,o){var i=null;switch(t){case"input":n=Wt(e,n),r=Wt(e,r),i=[];break;case"option":n=zt(e,n),r=zt(e,r),i=[];break;case"select":n=Cn({},n,{value:void 0}),r=Cn({},r,{value:void 0}),i=[];break;case"textarea":n=Yt(e,n),r=Yt(e,r),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=En)}rn(t,r,ri);var a,s;e=null;for(a in n)if(!r.hasOwnProperty(a)&&n.hasOwnProperty(a)&&null!=n[a])if("style"===a)for(s in t=n[a])t.hasOwnProperty(s)&&(e||(e={}),e[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Yn.hasOwnProperty(a)?i||(i=[]):(i=i||[]).push(a,null));for(a in r){var u=r[a];if(t=null!=n?n[a]:void 0,r.hasOwnProperty(a)&&u!==t&&(null!=u||null!=t))if("style"===a)if(t){for(s in t)!t.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in u)u.hasOwnProperty(s)&&t[s]!==u[s]&&(e||(e={}),e[s]=u[s])}else e||(i||(i=[]),i.push(a,e)),e=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,t=t?t.__html:void 0,null!=u&&t!==u&&(i=i||[]).push(a,""+u)):"children"===a?t===u||"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(Yn.hasOwnProperty(a)?(null!=u&&an(o,a),i||t===u||(i=[])):(i=i||[]).push(a,u))}return e&&(i=i||[]).push("style",e),i}function hn(e,t,n,r,o){"input"===n&&"radio"===o.type&&null!=o.name&&Ht(e,o),on(n,r),r=on(n,o);for(var i=0;i<t.length;i+=2){var a=t[i],s=t[i+1];"style"===a?nn(e,s,ri):"dangerouslySetInnerHTML"===a?Jo(e,s):"children"===a?tn(e,s):r?null!=s?Ut(e,a,s):e.removeAttribute(a):null!=s?Mt(e,a,s):jt(e,a)}switch(n){case"input":Vt(e,o);break;case"textarea":$t(e,o);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!o.multiple,n=o.value,null!=n?Kt(e,!!o.multiple,n,!1):t!==!!o.multiple&&(null!=o.defaultValue?Kt(e,!!o.multiple,o.defaultValue,!0):Kt(e,!!o.multiple,o.multiple?[]:"",!1))}}function pn(e,t,n,r,o){switch(t){case"iframe":case"object":xe("topLoad","load",e);break;case"video":case"audio":for(var i in oi)oi.hasOwnProperty(i)&&xe(i,oi[i],e);break;case"source":xe("topError","error",e);break;case"img":case"image":xe("topError","error",e),xe("topLoad","load",e);break;case"form":xe("topReset","reset",e),xe("topSubmit","submit",e);break;case"details":xe("topToggle","toggle",e);break;case"input":Bt(e,n),xe("topInvalid","invalid",e),an(o,"onChange");break;case"select":Gt(e,n),xe("topInvalid","invalid",e),an(o,"onChange");break;case"textarea":Xt(e,n),xe("topInvalid","invalid",e),an(o,"onChange")}rn(t,n,ri),r=null;for(var a in n)n.hasOwnProperty(a)&&(i=n[a],"children"===a?"string"===typeof i?e.textContent!==i&&(r=["children",i]):"number"===typeof i&&e.textContent!==""+i&&(r=["children",""+i]):Yn.hasOwnProperty(a)&&null!=i&&an(o,a));switch(t){case"input":ie(e),qt(e,n);break;case"textarea":ie(e),Jt(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=En)}return r}function fn(e,t){return e.nodeValue!==t}function dn(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function yn(e){return!(!(e=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))}function vn(e,t,n,o,i){dn(n)||r("200");var a=n._reactRootContainer;if(a)ui.updateContainer(t,a,e,i);else{if(!(o=o||yn(n)))for(a=void 0;a=n.lastChild;)n.removeChild(a);var s=ui.createContainer(n,o);a=n._reactRootContainer=s,ui.unbatchedUpdates(function(){ui.updateContainer(t,s,e,i)})}return ui.getPublicRootInstance(a)}function _n(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return dn(t)||r("200"),Ft(e,t,null,n)}function gn(e,t){this._reactRootContainer=ui.createContainer(e,t)}var mn=n(2),bn=n(21),Cn=n(1),En=n(3),wn=n(22),Tn=n(23),Sn=n(24),kn=n(25),Nn=n(28),Rn=n(6);mn||r("227");var Pn={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0},xn={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=xn,n=e.Properties||{},i=e.DOMAttributeNamespaces||{},a=e.DOMAttributeNames||{};e=e.DOMMutationMethods||{};for(var s in n){On.hasOwnProperty(s)&&r("48",s);var u=s.toLowerCase(),l=n[s];u={attributeName:u,attributeNamespace:null,propertyName:s,mutationMethod:null,mustUseProperty:o(l,t.MUST_USE_PROPERTY),hasBooleanValue:o(l,t.HAS_BOOLEAN_VALUE),hasNumericValue:o(l,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:o(l,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:o(l,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:o(l,t.HAS_STRING_BOOLEAN_VALUE)},1>=u.hasBooleanValue+u.hasNumericValue+u.hasOverloadedBooleanValue||r("50",s),a.hasOwnProperty(s)&&(u.attributeName=a[s]),i.hasOwnProperty(s)&&(u.attributeNamespace=i[s]),e.hasOwnProperty(s)&&(u.mutationMethod=e[s]),On[s]=u}}},On={},In=xn,An=In.MUST_USE_PROPERTY,Dn=In.HAS_BOOLEAN_VALUE,Fn=In.HAS_NUMERIC_VALUE,Ln=In.HAS_POSITIVE_NUMERIC_VALUE,Mn=In.HAS_OVERLOADED_BOOLEAN_VALUE,Un=In.HAS_STRING_BOOLEAN_VALUE,jn={Properties:{allowFullScreen:Dn,async:Dn,autoFocus:Dn,autoPlay:Dn,capture:Mn,checked:An|Dn,cols:Ln,contentEditable:Un,controls:Dn,default:Dn,defer:Dn,disabled:Dn,download:Mn,draggable:Un,formNoValidate:Dn,hidden:Dn,loop:Dn,multiple:An|Dn,muted:An|Dn,noValidate:Dn,open:Dn,playsInline:Dn,readOnly:Dn,required:Dn,reversed:Dn,rows:Ln,rowSpan:Fn,scoped:Dn,seamless:Dn,selected:An|Dn,size:Ln,start:Fn,span:Ln,spellCheck:Un,style:0,tabIndex:0,itemScope:Dn,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:Un},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},Wn=In.HAS_STRING_BOOLEAN_VALUE,Bn={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},Hn={Properties:{autoReverse:Wn,externalResourcesRequired:Wn,preserveAlpha:Wn},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:Bn.xlink,xlinkArcrole:Bn.xlink,xlinkHref:Bn.xlink,xlinkRole:Bn.xlink,xlinkShow:Bn.xlink,xlinkTitle:Bn.xlink,xlinkType:Bn.xlink,xmlBase:Bn.xml,xmlLang:Bn.xml,xmlSpace:Bn.xml}},Vn=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(Vn,s);Hn.Properties[t]=0,Hn.DOMAttributeNames[t]=e}),In.injectDOMPropertyConfig(jn),In.injectDOMPropertyConfig(Hn);var qn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!==typeof e.invokeGuardedCallback&&r("197"),u=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,o,i,a,s,l){u.apply(qn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,o,i,a,s,u){if(qn.invokeGuardedCallback.apply(this,arguments),qn.hasCaughtError()){var l=qn.clearCaughtError();qn._hasRethrowError||(qn._hasRethrowError=!0,qn._rethrowError=l)}},rethrowCaughtError:function(){return l.apply(qn,arguments)},hasCaughtError:function(){return qn._hasCaughtError},clearCaughtError:function(){if(qn._hasCaughtError){var e=qn._caughtError;return qn._caughtError=null,qn._hasCaughtError=!1,e}r("198")}},Qn=null,zn={},Kn=[],Gn={},Yn={},Xn={},$n=Object.freeze({plugins:Kn,eventNameDispatchConfigs:Gn,registrationNameModules:Yn,registrationNameDependencies:Xn,possibleRegistrationNames:null,injectEventPluginOrder:p,injectEventPluginsByName:f}),Jn=null,Zn=null,er=null,tr=null,nr={injectEventPluginOrder:p,injectEventPluginsByName:f},rr=Object.freeze({injection:nr,getListener:b,extractEvents:C,enqueueEvents:E,processEventQueue:w}),or=Math.random().toString(36).slice(2),ir="__reactInternalInstance$"+or,ar="__reactEventHandlers$"+or,sr=Object.freeze({precacheFiberNode:function(e,t){t[ir]=e},getClosestInstanceFromNode:T,getInstanceFromNode:function(e){return e=e[ir],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:S,getFiberCurrentPropsFromNode:k,updateFiberProps:function(e,t){e[ar]=t}}),ur=Object.freeze({accumulateTwoPhaseDispatches:D,accumulateTwoPhaseDispatchesSkipTarget:function(e){v(e,O)},accumulateEnterLeaveDispatches:F,accumulateDirectDispatches:function(e){v(e,A)}}),lr=null,cr={_root:null,_startText:null,_fallbackText:null},hr="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),pr={type:null,target:null,currentTarget:En.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};Cn(j.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=En.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=En.thatReturnsTrue)},persist:function(){this.isPersistent=En.thatReturnsTrue},isPersistent:En.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<hr.length;t++)this[hr[t]]=null}}),j.Interface=pr,j.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;Cn(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=Cn({},this.Interface,t),e.augmentClass=this.augmentClass,H(e)},H(j),j.augmentClass(V,{data:null}),j.augmentClass(q,{data:null});var fr=[9,13,27,32],dr=bn.canUseDOM&&"CompositionEvent"in window,yr=null;bn.canUseDOM&&"documentMode"in document&&(yr=document.documentMode);var vr;if(vr=bn.canUseDOM&&"TextEvent"in window&&!yr){var _r=window.opera;vr=!("object"===typeof _r&&"function"===typeof _r.version&&12>=parseInt(_r.version(),10))}var gr,mr=vr,br=bn.canUseDOM&&(!dr||yr&&8<yr&&11>=yr),Cr=String.fromCharCode(32),Er={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},wr=!1,Tr=!1,Sr={eventTypes:Er,extractEvents:function(e,t,n,r){var o;if(dr)e:{switch(e){case"topCompositionStart":var i=Er.compositionStart;break e;case"topCompositionEnd":i=Er.compositionEnd;break e;case"topCompositionUpdate":i=Er.compositionUpdate;break e}i=void 0}else Tr?Q(e,n)&&(i=Er.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(i=Er.compositionStart);return i?(br&&(Tr||i!==Er.compositionStart?i===Er.compositionEnd&&Tr&&(o=M()):(cr._root=r,cr._startText=U(),Tr=!0)),i=V.getPooled(i,t,n,r),o?i.data=o:null!==(o=z(n))&&(i.data=o),D(i),o=i):o=null,(e=mr?K(e,n):G(e,n))?(t=q.getPooled(Er.beforeInput,t,n,r),t.data=e,D(t)):t=null,[o,t]}},kr=null,Nr=null,Rr=null,Pr={injectFiberControlledHostComponent:function(e){kr=e}},xr=Object.freeze({injection:Pr,enqueueStateRestore:X,restoreStateIfNeeded:$}),Or=!1,Ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};bn.canUseDOM&&(gr=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var Ar={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Dr=null,Fr=null,Lr=!1;bn.canUseDOM&&(Lr=ne("input")&&(!document.documentMode||9<document.documentMode));var Mr={eventTypes:Ar,_isInputEventSupported:Lr,extractEvents:function(e,t,n,r){var o=t?S(t):window,i=o.nodeName&&o.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===o.type)var a=ce;else if(ee(o))if(Lr)a=ve;else{a=de;var s=fe}else!(i=o.nodeName)||"input"!==i.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type||(a=ye);if(a&&(a=a(e,t)))return se(a,n,r);s&&s(e,o,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||o._wrapperState)&&e.controlled&&"number"===o.type&&(e=""+o.value,o.getAttribute("value")!==e&&o.setAttribute("value",e))}};j.augmentClass(_e,{view:null,detail:null});var Ur={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};_e.augmentClass(be,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:me,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var jr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Wr={eventTypes:jr,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?T(t):null):e=null,e===t)return null;var i=null==e?o:S(e);o=null==t?o:S(t);var a=be.getPooled(jr.mouseLeave,e,n,r);return a.type="mouseleave",a.target=i,a.relatedTarget=o,n=be.getPooled(jr.mouseEnter,t,n,r),n.type="mouseenter",n.target=o,n.relatedTarget=i,F(a,n,e,t),[a,n]}},Br=mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hr=[],Vr=!0,qr=void 0,Qr=Object.freeze({get _enabled(){return Vr},get _handleTopLevel(){return qr},setHandleTopLevel:function(e){qr=e},setEnabled:Pe,isEnabled:function(){return Vr},trapBubbledEvent:xe,trapCapturedEvent:Oe,dispatchEvent:Ie}),zr={animationend:Ae("Animation","AnimationEnd"),animationiteration:Ae("Animation","AnimationIteration"),animationstart:Ae("Animation","AnimationStart"),transitionend:Ae("Transition","TransitionEnd")},Kr={},Gr={};bn.canUseDOM&&(Gr=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);var Yr={topAbort:"abort",topAnimationEnd:De("animationend")||"animationend",topAnimationIteration:De("animationiteration")||"animationiteration",topAnimationStart:De("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:De("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},Xr={},$r=0,Jr="_reactListenersID"+(""+Math.random()).slice(2),Zr=bn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,eo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},to=null,no=null,ro=null,oo=!1,io={eventTypes:eo,extractEvents:function(e,t,n,r){var o,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(o=!i)){e:{i=Fe(i),o=Xn.onSelect;for(var a=0;a<o.length;a++){var s=o[a];if(!i.hasOwnProperty(s)||!i[s]){i=!1;break e}}i=!0}o=!i}if(o)return null;switch(i=t?S(t):window,e){case"topFocus":(ee(i)||"true"===i.contentEditable)&&(to=i,no=t,ro=null);break;case"topBlur":ro=no=to=null;break;case"topMouseDown":oo=!0;break;case"topContextMenu":case"topMouseUp":return oo=!1,je(n,r);case"topSelectionChange":if(Zr)break;case"topKeyDown":case"topKeyUp":return je(n,r)}return null}};j.augmentClass(We,{animationName:null,elapsedTime:null,pseudoElement:null}),j.augmentClass(Be,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_e.augmentClass(He,{relatedTarget:null});var ao={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},so={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};_e.augmentClass(qe,{key:function(e){if(e.key){var t=ao[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ve(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?so[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:me,charCode:function(e){return"keypress"===e.type?Ve(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ve(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),be.augmentClass(Qe,{dataTransfer:null}),_e.augmentClass(ze,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:me}),j.augmentClass(Ke,{propertyName:null,elapsedTime:null,pseudoElement:null}),be.augmentClass(Ge,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var uo={},lo={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;t="top"+t,n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t]},uo[e]=n,lo[t]=n});var co={eventTypes:uo,extractEvents:function(e,t,n,r){var o=lo[e];if(!o)return null;switch(e){case"topKeyPress":if(0===Ve(n))return null;case"topKeyDown":case"topKeyUp":e=qe;break;case"topBlur":case"topFocus":e=He;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=be;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=Qe;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=ze;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=We;break;case"topTransitionEnd":e=Ke;break;case"topScroll":e=_e;break;case"topWheel":e=Ge;break;case"topCopy":case"topCut":case"topPaste":e=Be;break;default:e=j}return t=e.getPooled(o,t,n,r),D(t),t}};qr=function(e,t,n,r){e=C(e,t,n,r),E(e),w(!1)},nr.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Jn=sr.getFiberCurrentPropsFromNode,Zn=sr.getInstanceFromNode,er=sr.getNodeFromInstance,nr.injectEventPluginsByName({SimpleEventPlugin:co,EnterLeaveEventPlugin:Wr,ChangeEventPlugin:Mr,SelectEventPlugin:io,BeforeInputEventPlugin:Sr});var ho=[],po=-1;new Set;var fo={current:Rn},yo={current:!1},vo=Rn,_o=null,go=null,mo="function"===typeof Symbol&&Symbol.for,bo=mo?Symbol.for("react.element"):60103,Co=mo?Symbol.for("react.call"):60104,Eo=mo?Symbol.for("react.return"):60105,wo=mo?Symbol.for("react.portal"):60106,To=mo?Symbol.for("react.fragment"):60107,So="function"===typeof Symbol&&Symbol.iterator,ko=Array.isArray,No=Nt(!0),Ro=Nt(!1),Po={},xo=Object.freeze({default:Dt}),Oo=xo&&Dt||xo,Io=Oo.default?Oo.default:Oo,Ao="object"===typeof performance&&"function"===typeof performance.now,Do=void 0;Do=Ao?function(){return performance.now()}:function(){return Date.now()};var Fo=void 0,Lo=void 0;if(bn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var Mo,Uo=null,jo=!1,Wo=-1,Bo=!1,Ho=0,Vo=33,qo=33;Mo=Ao?{didTimeout:!1,timeRemaining:function(){var e=Ho-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Ho-Date.now();return 0<e?e:0}};var Qo="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===Qo){if(jo=!1,e=Do(),0>=Ho-e){if(!(-1!==Wo&&Wo<=e))return void(Bo||(Bo=!0,requestAnimationFrame(zo)));Mo.didTimeout=!0}else Mo.didTimeout=!1;Wo=-1,e=Uo,Uo=null,null!==e&&e(Mo)}},!1);var zo=function(e){Bo=!1;var t=e-Ho+qo;t<qo&&Vo<qo?(8>t&&(t=8),qo=t<Vo?Vo:t):Vo=t,Ho=e+qo,jo||(jo=!0,window.postMessage(Qo,"*"))};Fo=function(e,t){return Uo=e,null!=t&&"number"===typeof t.timeout&&(Wo=Do()+t.timeout),Bo||(Bo=!0,requestAnimationFrame(zo)),0},Lo=function(){Uo=null,jo=!1,Wo=-1}}else Fo=window.requestIdleCallback,Lo=window.cancelIdleCallback;else Fo=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})})},Lo=function(e){clearTimeout(e)};var Ko=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Go={},Yo={},Xo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},$o=void 0,Jo=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Xo.svg||"innerHTML"in e)e.innerHTML=t;else{for($o=$o||document.createElement("div"),$o.innerHTML="<svg>"+t+"</svg>",t=$o.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),Zo={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ei=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(e){ei.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zo[t]=Zo[e]})});var ti=Cn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ni=Xo.html,ri=En.thatReturns(""),oi={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ii=Object.freeze({createElement:sn,createTextNode:un,setInitialProperties:ln,diffProperties:cn,updateProperties:hn,diffHydratedProperties:pn,diffHydratedText:fn,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(Vt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var i=k(o);i||r("90"),ae(o),Vt(o,i)}}}break;case"textarea":$t(e,n);break;case"select":null!=(t=n.value)&&Kt(e,!!n.multiple,t,!1)}}});Pr.injectFiberControlledHostComponent(ii);var ai=null,si=null,ui=Io({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:en(null,"");break;default:t=8===t?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=en(e,t)}return e},getChildHostContext:function(e,t){return en(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){ai=Vr;var e=Tn();if(Ue(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch(e){t=null;break e}var i=0,a=-1,s=-1,u=0,l=0,c=e,h=null;t:for(;;){for(var p;c!==t||0!==r&&3!==c.nodeType||(a=i+r),c!==o||0!==n&&3!==c.nodeType||(s=i+n),3===c.nodeType&&(i+=c.nodeValue.length),null!==(p=c.firstChild);)h=c,c=p;for(;;){if(c===e)break t;if(h===t&&++u===r&&(a=i),h===o&&++l===n&&(s=i),null!==(p=c.nextSibling))break;c=h,h=c.parentNode}c=p}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;si={focusedElem:e,selectionRange:t},Pe(!1)},resetAfterCommit:function(){var e=si,t=Tn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&kn(document.documentElement,n)){if(Ue(n))if(t=r.start,e=r.end,void 0===e&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var o=n[L()].length;e=Math.min(r.start,o),r=void 0===r.end?e:Math.min(r.end,o),!t.extend&&e>r&&(o=r,r=e,e=o),o=Me(n,e);var i=Me(n,r);if(o&&i&&(1!==t.rangeCount||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)){var a=document.createRange();a.setStart(o.node,o.offset),t.removeAllRanges(),e>r?(t.addRange(a),t.extend(i.node,i.offset)):(a.setEnd(i.node,i.offset),t.addRange(a))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(Nn(n),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}si=null,Pe(ai),ai=null},createInstance:function(e,t,n,r,o){return e=sn(e,t,n,r),e[ir]=o,e[ar]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){ln(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,o){return cn(e,t,n,r,o)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=un(e,t),e[ir]=r,e},now:Do,mutation:{commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,o){e[ar]=o,hn(e,t,n,r,o)},resetTextContent:function(e){e.textContent=""},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,o,i){return e[ir]=i,e[ar]=n,pn(e,t,n,o,r)},hydrateTextInstance:function(e,t,n){return e[ir]=n,fn(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Fo,cancelDeferredCallback:Lo,useSyncScheduling:!0});J=ui.batchedUpdates,gn.prototype.render=function(e,t){ui.updateContainer(e,this._reactRootContainer,null,t)},gn.prototype.unmount=function(e){ui.updateContainer(null,this._reactRootContainer,null,e)};var li={createPortal:_n,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(t)return ui.findHostInstance(t);"function"===typeof e.render?r("188"):r("213",Object.keys(e))},hydrate:function(e,t,n){return vn(null,e,t,!0,n)},render:function(e,t,n){return vn(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,o){return(null==e||void 0===e._reactInternalFiber)&&r("38"),vn(e,t,n,!1,o)},unmountComponentAtNode:function(e){return dn(e)||r("40"),!!e._reactRootContainer&&(ui.unbatchedUpdates(function(){vn(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:_n,unstable_batchedUpdates:Z,unstable_deferredUpdates:ui.deferredUpdates,flushSync:ui.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:rr,EventPluginRegistry:$n,EventPropagators:ur,ReactControlledComponent:xr,ReactDOMComponentTree:sr,ReactDOMEventListener:Qr}};ui.injectIntoDevTools({findFiberByHostInstance:T,bundleType:0,version:"16.2.0",rendererPackageName:"react-dom"});var ci=Object.freeze({default:li}),hi=ci&&li||ci;e.exports=hi.default?hi.default:hi},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=o},function(e,t,n){"use strict";var r=n(3),o={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=o},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=o},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!o(e)&&(o(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var o=n(26);e.exports=r},function(e,t,n){"use strict";function r(e){return o(e)&&3==e.nodeType}var o=n(27);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),s=n.n(a),u=n(31),l=(n.n(u),n(32)),c=(n.n(l),n(7)),h=n.n(c),p=(n(37),n(40),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={imgs:{}},n}return i(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this;this.dataRef=h.a.database().ref("imgs/"),this.storageRef=h.a.storage().ref("imgs/"),this.dataRef.on("value",function(t){var n=t.val();e.setState({imgs:n})})}},{key:"fileChange",value:function(e){var t=this;console.log(e.target.files[0]);var n=e.target.files[0].name,r=e.target.files[0];this.storageRef.child(n).put(r).then(function(e){return e.ref.getDownloadURL()}).then(function(e){t.dataRef.push({url:e})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("div",null,s.a.createElement("input",{type:"file",onChange:function(t){return e.fileChange(t)}})),Object.keys(this.state.imgs).map(function(t,n){return s.a.createElement("img",{key:n,src:e.state.imgs[t].url})}))}}]),t}(a.Component);t.a=f},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){function r(){}function o(e,t){return function(){e.apply(t,arguments)}}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function a(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:u)(t.promise,e._value);var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,r)})}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void l(e);if("function"===typeof n)return void h(o(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function c(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}function p(e,t){return t={exports:{}},e(t,t.exports),t.exports}var f=n(36),d=(n.n(f),setTimeout);i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new c(e,t,n)),n},i.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},i.all=function(e){return new i(function(t,n){function r(e,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,function(t){r(e,t)},n)}o[e]=a,0===--i&&t(o)}catch(e){n(e)}}if(!e||"undefined"===typeof e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var i=o.length,a=0;a<o.length;a++)r(a,o[a])})},i.resolve=function(e){return e&&"object"===typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},i._immediateFn="function"===typeof e&&function(t){e(t)}||function(e){d(e,0)},i._unhandledRejectionFn=function(e){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var y=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("unable to locate global object")}();y.Promise||(y.Promise=i);var v=p(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),_=p(function(e){var t=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=t)}),g=(_.version,function(e){return"object"===typeof e?null!==e:"function"===typeof e}),m=function(e){if(!g(e))throw TypeError(e+" is not an object!");return e},b=function(e){try{return!!e()}catch(e){return!0}},C=!b(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),E=v.document,w=g(E)&&g(E.createElement),T=function(e){return w?E.createElement(e):{}},S=!C&&!b(function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a}),k=function(e,t){if(!g(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!g(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!g(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},N=Object.defineProperty,R=C?Object.defineProperty:function(e,t,n){if(m(e),t=k(t,!0),m(n),S)try{return N(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},P={f:R},x=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},O=C?function(e,t,n){return P.f(e,t,x(1,n))}:function(e,t,n){return e[t]=n,e},I={}.hasOwnProperty,A=function(e,t){return I.call(e,t)},D=0,F=Math.random(),L=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++D+F).toString(36))},M=p(function(e){var t=L("src"),n=Function.toString,r=(""+n).split("toString");_.inspectSource=function(e){return n.call(e)},(e.exports=function(e,n,o,i){var a="function"==typeof o;a&&(A(o,"name")||O(o,"name",n)),e[n]!==o&&(a&&(A(o,t)||O(o,t,e[n]?""+e[n]:r.join(String(n)))),e===v?e[n]=o:i?e[n]?e[n]=o:O(e,n,o):(delete e[n],O(e,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||n.call(this)})}),U=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},j=function(e,t,n){if(U(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},W=function(e,t,n){var r,o,i,a,s=e&W.F,u=e&W.G,l=e&W.S,c=e&W.P,h=e&W.B,p=u?v:l?v[t]||(v[t]={}):(v[t]||{}).prototype,f=u?_:_[t]||(_[t]={}),d=f.prototype||(f.prototype={});u&&(n=t);for(r in n)o=!s&&p&&void 0!==p[r],i=(o?p:n)[r],a=h&&o?j(i,v):c&&"function"==typeof i?j(Function.call,i):i,p&&M(p,r,i,e&W.U),f[r]!=i&&O(f,r,a),c&&d[r]!=i&&(d[r]=i)};v.core=_,W.F=1,W.G=2,W.S=4,W.P=8,W.B=16,W.W=32,W.U=64,W.R=128;var B=W,H={}.toString,V=function(e){return H.call(e).slice(8,-1)},q=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==V(e)?e.split(""):Object(e)},Q=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e},z=function(e){return Object(Q(e))},K=Math.ceil,G=Math.floor,Y=function(e){return isNaN(e=+e)?0:(e>0?G:K)(e)},X=Math.min,$=function(e){return e>0?X(Y(e),9007199254740991):0},J=Array.isArray||function(e){return"Array"==V(e)},Z=v["__core-js_shared__"]||(v["__core-js_shared__"]={}),ee=function(e){return Z[e]||(Z[e]={})},te=p(function(e){var t=ee("wks"),n=v.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:L)("Symbol."+e))}).store=t}),ne=te("species"),re=function(e){var t;return J(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!J(t.prototype)||(t=void 0),g(t)&&null===(t=t[ne])&&(t=void 0)),void 0===t?Array:t},oe=function(e,t){return new(re(e))(t)},ie=function(e,t){var n=1==e,r=2==e,o=3==e,i=4==e,a=6==e,s=5==e||a,u=t||oe;return function(t,l,c){for(var h,p,f=z(t),d=q(f),y=j(l,c,3),v=$(d.length),_=0,g=n?u(t,v):r?u(t,0):void 0;v>_;_++)if((s||_ in d)&&(h=d[_],p=y(h,_,f),e))if(n)g[_]=p;else if(p)switch(e){case 3:return!0;case 5:return h;case 6:return _;case 2:g.push(h)}else if(i)return!1;return a?-1:o||i?i:g}},ae=te("unscopables"),se=Array.prototype;void 0==se[ae]&&O(se,ae,{});var ue=function(e){se[ae][e]=!0},le=ie(5),ce=!0;"find"in[]&&Array(1).find(function(){ce=!1}),B(B.P+B.F*ce,"Array",{find:function(e){return le(this,e,arguments.length>1?arguments[1]:void 0)}}),ue("find");var he=(_.Array.find,ie(6)),pe=!0;"findIndex"in[]&&Array(1).findIndex(function(){pe=!1}),B(B.P+B.F*pe,"Array",{findIndex:function(e){return he(this,e,arguments.length>1?arguments[1]:void 0)}}),ue("findIndex");var fe=(_.Array.findIndex,function(e){return q(Q(e))}),de=Math.max,ye=Math.min,ve=function(e,t){return e=Y(e),e<0?de(e+t,0):ye(e,t)},_e=ee("keys"),ge=function(e){return _e[e]||(_e[e]=L(e))},me=function(e){return function(t,n,r){var o,i=fe(t),a=$(i.length),s=ve(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}}(!1),be=ge("IE_PROTO"),Ce=function(e,t){var n,r=fe(e),o=0,i=[];for(n in r)n!=be&&A(r,n)&&i.push(n);for(;t.length>o;)A(r,n=t[o++])&&(~me(i,n)||i.push(n));return i},Ee="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),we=Object.keys||function(e){return Ce(e,Ee)},Te=Object.getOwnPropertySymbols,Se={f:Te},ke={}.propertyIsEnumerable,Ne={f:ke},Re=Object.assign,Pe=!Re||b(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Re({},e)[n]||Object.keys(Re({},t)).join("")!=r})?function(e,t){for(var n=z(e),r=arguments.length,o=1,i=Se.f,a=Ne.f;r>o;)for(var s,u=q(arguments[o++]),l=i?we(u).concat(i(u)):we(u),c=l.length,h=0;c>h;)a.call(u,s=l[h++])&&(n[s]=u[s]);return n}:Re;B(B.S+B.F,"Object",{assign:Pe});var xe=(_.Object.assign,te("match")),Oe=function(e){var t;return g(e)&&(void 0!==(t=e[xe])?!!t:"RegExp"==V(e))},Ie=function(e,t,n){if(Oe(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(Q(e))},Ae=te("match"),De="".startsWith;B(B.P+B.F*function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Ae]=!1,!"/./"[e](t)}catch(e){}}return!0}("startsWith"),"String",{startsWith:function(e){var t=Ie(this,e,"startsWith"),n=$(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return De?De.call(t,r,n):t.slice(n,n+r.length)===r}});var Fe=(_.String.startsWith,function(e){var t=String(Q(this)),n="",r=Y(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n});B(B.P,"String",{repeat:Fe});var Le=(_.String.repeat,p(function(e){var t=L("meta"),n=P.f,r=0,o=Object.isExtensible||function(){return!0},i=!b(function(){return o(Object.preventExtensions({}))}),a=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},s=function(e,n){if(!g(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!A(e,t)){if(!o(e))return"F";if(!n)return"E";a(e)}return e[t].i},u=function(e,n){if(!A(e,t)){if(!o(e))return!0;if(!n)return!1;a(e)}return e[t].w},l=function(e){return i&&c.NEED&&o(e)&&!A(e,t)&&a(e),e},c=e.exports={KEY:t,NEED:!1,fastKey:s,getWeak:u,onFreeze:l}})),Me=(Le.KEY,Le.NEED,Le.fastKey,Le.getWeak,Le.onFreeze,P.f),Ue=te("toStringTag"),je=function(e,t,n){e&&!A(e=n?e:e.prototype,Ue)&&Me(e,Ue,{configurable:!0,value:t})},We=te,Be={f:We},He=P.f,Ve=function(e){var t=_.Symbol||(_.Symbol=v.Symbol||{});"_"==e.charAt(0)||e in t||He(t,e,{value:Be.f(e)})},qe=function(e){var t=we(e),n=Se.f;if(n)for(var r,o=n(e),i=Ne.f,a=0;o.length>a;)i.call(e,r=o[a++])&&t.push(r);return t},Qe=C?Object.defineProperties:function(e,t){m(e);for(var n,r=we(t),o=r.length,i=0;o>i;)P.f(e,n=r[i++],t[n]);return e},ze=v.document,Ke=ze&&ze.documentElement,Ge=ge("IE_PROTO"),Ye=function(){},Xe=function(){var e,t=T("iframe"),n=Ee.length;for(t.style.display="none",Ke.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),Xe=e.F;n--;)delete Xe.prototype[Ee[n]];return Xe()},$e=Object.create||function(e,t){var n;return null!==e?(Ye.prototype=m(e),n=new Ye,Ye.prototype=null,n[Ge]=e):n=Xe(),void 0===t?n:Qe(n,t)},Je=Ee.concat("length","prototype"),Ze=Object.getOwnPropertyNames||function(e){return Ce(e,Je)},et={f:Ze},tt=et.f,nt={}.toString,rt="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ot=function(e){try{return tt(e)}catch(e){return rt.slice()}},it=function(e){return rt&&"[object Window]"==nt.call(e)?ot(e):tt(fe(e))},at={f:it},st=Object.getOwnPropertyDescriptor,ut=C?st:function(e,t){if(e=fe(e),t=k(t,!0),S)try{return st(e,t)}catch(e){}if(A(e,t))return x(!Ne.f.call(e,t),e[t])},lt={f:ut},ct=Le.KEY,ht=lt.f,pt=P.f,ft=at.f,dt=v.Symbol,yt=v.JSON,vt=yt&&yt.stringify,_t=te("_hidden"),gt=te("toPrimitive"),mt={}.propertyIsEnumerable,bt=ee("symbol-registry"),Ct=ee("symbols"),Et=ee("op-symbols"),wt=Object.prototype,Tt="function"==typeof dt,St=v.QObject,kt=!St||!St.prototype||!St.prototype.findChild,Nt=C&&b(function(){return 7!=$e(pt({},"a",{get:function(){return pt(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=ht(wt,t);r&&delete wt[t],pt(e,t,n),r&&e!==wt&&pt(wt,t,r)}:pt,Rt=function(e){var t=Ct[e]=$e(dt.prototype);return t._k=e,t},Pt=Tt&&"symbol"==typeof dt.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof dt},xt=function(e,t,n){return e===wt&&xt(Et,t,n),m(e),t=k(t,!0),m(n),A(Ct,t)?(n.enumerable?(A(e,_t)&&e[_t][t]&&(e[_t][t]=!1),n=$e(n,{enumerable:x(0,!1)})):(A(e,_t)||pt(e,_t,x(1,{})),e[_t][t]=!0),Nt(e,t,n)):pt(e,t,n)},Ot=function(e,t){m(e);for(var n,r=qe(t=fe(t)),o=0,i=r.length;i>o;)xt(e,n=r[o++],t[n]);return e},It=function(e,t){return void 0===t?$e(e):Ot($e(e),t)},At=function(e){var t=mt.call(this,e=k(e,!0));return!(this===wt&&A(Ct,e)&&!A(Et,e))&&(!(t||!A(this,e)||!A(Ct,e)||A(this,_t)&&this[_t][e])||t)},Dt=function(e,t){if(e=fe(e),t=k(t,!0),e!==wt||!A(Ct,t)||A(Et,t)){var n=ht(e,t);return!n||!A(Ct,t)||A(e,_t)&&e[_t][t]||(n.enumerable=!0),n}},Ft=function(e){for(var t,n=ft(fe(e)),r=[],o=0;n.length>o;)A(Ct,t=n[o++])||t==_t||t==ct||r.push(t);return r},Lt=function(e){for(var t,n=e===wt,r=ft(n?Et:fe(e)),o=[],i=0;r.length>i;)!A(Ct,t=r[i++])||n&&!A(wt,t)||o.push(Ct[t]);return o};Tt||(dt=function(){if(this instanceof dt)throw TypeError("Symbol is not a constructor!");var e=L(arguments.length>0?arguments[0]:void 0),t=function(n){this===wt&&t.call(Et,n),A(this,_t)&&A(this[_t],e)&&(this[_t][e]=!1),Nt(this,e,x(1,n))};return C&&kt&&Nt(wt,e,{configurable:!0,set:t}),Rt(e)},M(dt.prototype,"toString",function(){return this._k}),lt.f=Dt,P.f=xt,et.f=at.f=Ft,Ne.f=At,Se.f=Lt,C&&M(wt,"propertyIsEnumerable",At,!0),Be.f=function(e){return Rt(te(e))}),B(B.G+B.W+B.F*!Tt,{Symbol:dt});for(var Mt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Ut=0;Mt.length>Ut;)te(Mt[Ut++]);for(var jt=we(te.store),Wt=0;jt.length>Wt;)Ve(jt[Wt++]);B(B.S+B.F*!Tt,"Symbol",{for:function(e){return A(bt,e+="")?bt[e]:bt[e]=dt(e)},keyFor:function(e){if(!Pt(e))throw TypeError(e+" is not a symbol!");for(var t in bt)if(bt[t]===e)return t},useSetter:function(){kt=!0},useSimple:function(){kt=!1}}),B(B.S+B.F*!Tt,"Object",{create:It,defineProperty:xt,defineProperties:Ot,getOwnPropertyDescriptor:Dt,getOwnPropertyNames:Ft,getOwnPropertySymbols:Lt}),yt&&B(B.S+B.F*(!Tt||b(function(){var e=dt();return"[null]"!=vt([e])||"{}"!=vt({a:e})||"{}"!=vt(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(g(t)||void 0!==e)&&!Pt(e))return J(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Pt(t))return t}),r[1]=t,vt.apply(yt,r)}}),dt.prototype[gt]||O(dt.prototype,gt,dt.prototype.valueOf),je(dt,"Symbol"),je(Math,"Math",!0),je(v.JSON,"JSON",!0);var Bt=te("toStringTag"),Ht="Arguments"==V(function(){return arguments}()),Vt=function(e,t){try{return e[t]}catch(e){}},qt=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=Vt(t=Object(e),Bt))?n:Ht?V(t):"Object"==(r=V(t))&&"function"==typeof t.callee?"Arguments":r},Qt={};Qt[te("toStringTag")]="z",Qt+""!="[object z]"&&M(Object.prototype,"toString",function(){return"[object "+qt(this)+"]"},!0),Ve("asyncIterator"),Ve("observable");var zt=(_.Symbol,{}),Kt={};O(Kt,te("iterator"),function(){return this});var Gt=function(e,t,n){e.prototype=$e(Kt,{next:x(1,n)}),je(e,t+" Iterator")},Yt=ge("IE_PROTO"),Xt=Object.prototype,$t=Object.getPrototypeOf||function(e){return e=z(e),A(e,Yt)?e[Yt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Xt:null},Jt=te("iterator"),Zt=!([].keys&&"next"in[].keys()),en=function(){return this},tn=function(e,t,n,r,o,i,a){Gt(n,t,r);var s,u,l,c=function(e){if(!Zt&&e in d)return d[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",p="values"==o,f=!1,d=e.prototype,y=d[Jt]||d["@@iterator"]||o&&d[o],v=y||c(o),_=o?p?c("entries"):v:void 0,g="Array"==t?d.entries||y:y;if(g&&(l=$t(g.call(new e)))!==Object.prototype&&l.next&&(je(l,h,!0),"function"!=typeof l[Jt]&&O(l,Jt,en)),p&&y&&"values"!==y.name&&(f=!0,v=function(){return y.call(this)}),(Zt||f||!d[Jt])&&O(d,Jt,v),zt[t]=v,zt[h]=en,o)if(s={values:p?v:c("values"),keys:i?v:c("keys"),entries:_},a)for(u in s)u in d||M(d,u,s[u]);else B(B.P+B.F*(Zt||f),t,s);return s},nn=function(e){return function(t,n){var r,o,i=String(Q(t)),a=Y(n),s=i.length;return a<0||a>=s?e?"":void 0:(r=i.charCodeAt(a),r<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):r:e?i.slice(a,a+2):o-56320+(r-55296<<10)+65536)}}(!0);tn(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=nn(t,n),this._i+=e.length,{value:e,done:!1})});var rn=function(e,t){return{value:t,done:!!e}},on=tn(Array,"Array",function(e,t){this._t=fe(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,rn(1)):"keys"==t?rn(0,n):"values"==t?rn(0,e[n]):rn(0,[n,e[n]])},"values");zt.Arguments=zt.Array,ue("keys"),ue("values"),ue("entries");for(var an=te("iterator"),sn=te("toStringTag"),un=zt.Array,ln={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},cn=we(ln),hn=0;hn<cn.length;hn++){var pn,fn=cn[hn],dn=ln[fn],yn=v[fn],vn=yn&&yn.prototype;if(vn&&(vn[an]||O(vn,an,un),vn[sn]||O(vn,sn,fn),zt[fn]=un,dn))for(pn in on)vn[pn]||M(vn,pn,on[pn],!0)}Be.f("iterator")}.call(t,n(34).setImmediate,n(0))},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(35),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[u]=r,s(u),u++}function o(e){delete l[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(c)setTimeout(a,0,e);else{var t=l[e];if(t){c=!0;try{i(t)}finally{o(e),c=!1}}}}if(!e.setImmediate){var s,u=1,l={},c=!1,h=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var e=h.documentElement;s=function(t){var n=h.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),p.setImmediate=r,p.clearImmediate=o}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(t,n(0),n(8))},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function l(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(_.arrayBuffer&&_.blob&&m(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return C.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(_.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&g.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},_.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var C=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];v.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=v,e.fetch=function(e,t){return new Promise(function(n,r){var o=new f(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new v(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&_.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";var r=n(38);n.n(r)},function(e,t,n){"use strict";(function(r){function o(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var o=n[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(e){}t+="/"+o}return t}function i(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));for(var n=0,r=e.split("&");n<r.length;n++){var o=r[n];if(0!==o.length){var i=o.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):M("Invalid query segment '"+o+"' in query '"+e+"'")}}return t}function a(e,t){return V(e.name,t.name)}function s(e,t){return V(e,t)}function u(e,t){if(void 0===t&&(t=null),null===e)return Ye.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),_.assert(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Me(e,u(t))}if(e instanceof Array||!Je){var n=Ye.EMPTY_NODE,r=e;return _.forEach(r,function(e,t){if(_.contains(r,e)&&"."!==e.substring(0,1)){var o=u(t);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(u(t))}var o=[],i=!1,l=e;if(_.forEach(l,function(e,t){if("string"!==typeof e||"."!==e.substring(0,1)){var n=u(l[e]);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),o.push(new Oe(e,n)))}}),0==o.length)return Ye.EMPTY_NODE;var c=ze(o,a,function(e){return e.name},s);if(i){var h=ze(o,je.getCompare());return new Ye(c,u(t),new Ge({".priority":h},{".priority":je}))}return new Ye(c,u(t),Ge.Default)}function l(t){var n=t.INTERNAL.registerService("database",function(e,t,n){return Sn.getInstance().databaseFromApp(e,n)},{Reference:bn,Query:lt,Database:kn,enableLogging:I,INTERNAL:Ln,ServerValue:Qn,TEST_ACCESS:qn},null,!0);_.isNodeSdk()&&(e.exports=n)}Object.defineProperty(t,"__esModule",{value:!0});var c,h,p,f,d,y,v,_=n(9),g=n(39),m=n(10),b=function(e){return e&&"object"===typeof e&&"default"in e?e.default:e}(n(4)),C=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:_.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),E=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return _.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),w=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new C(t)}}catch(e){}return new E},T=w("localStorage"),S=w("sessionStorage"),k=new g.Logger("@firebase/database"),N=function(){var e=1;return function(){return e++}}(),R=function(e){var t=_.stringToByteArray(e),n=new _.Sha1;n.update(t);var r=n.digest();return _.base64.encodeByteArray(r)},P=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"===typeof e[r]&&"number"===typeof e[r].length?n+=P.apply(null,e[r]):"object"===typeof e[r]?n+=_.stringify(e[r]):n+=e[r],n+=" ";return n},x=null,O=!0,I=function(e,t){_.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(k.logLevel=g.LogLevel.VERBOSE,x=k.log.bind(k),t&&S.set("logging_enabled",!0)):"function"===typeof e?x=e:(x=null,S.remove("logging_enabled"))},A=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===O&&(O=!1,null===x&&!0===S.get("logging_enabled")&&I(!0)),x){var n=P.apply(null,e);x(n)}},D=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];A.apply(void 0,[e].concat(t))}},F=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+P.apply(void 0,e);k.error(n)},L=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+P.apply(void 0,e);throw k.error(n),new Error(n)},M=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+P.apply(void 0,e);k.warn(n)},U=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},j=function(e){return"number"===typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},W=function(e){if(_.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){if(!document.body)return void setTimeout(n,Math.floor(10));t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},B="[MIN_NAME]",H="[MAX_NAME]",V=function(e,t){if(e===t)return 0;if(e===B||t===H)return-1;if(t===B||e===H)return 1;var n=ee(e),r=ee(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},q=function(e,t){return e===t?0:e<t?-1:1},Q=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+_.stringify(t))},z=function(e){if("object"!==typeof e||null===e)return _.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",o=0;o<t.length;o++)0!==o&&(r+=","),r+=_.stringify(t[o]),r+=":",r+=z(e[t[o]]);return r+="}"},K=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],o=0;o<n;o+=t)o+t>n?r.push(e.substring(o,n)):r.push(e.substring(o,o+t));return r},G=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n]);else _.forEach(e,function(e,n){return t(n,e)})},Y=function(e){_.assert(!j(e),"Invalid JSON number");var t,n,r,o,i,a,s;for(0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,e=Math.abs(e),e>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=o+1023,r=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),a=[],i=52;i;i-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(i=11;i;i-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var u="";for(i=0;i<64;i+=8){var l=parseInt(s.substr(i,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()},X=function(){return!("object"!==typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},$=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI},J=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},Z=new RegExp("^-?\\d{1,10}$"),ee=function(e){if(Z.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},te=function(e){try{e()}catch(e){setTimeout(function(){var t=e.stack||"";throw M("Exception was thrown by user callback.",t),e},Math.floor(0))}},ne=function(){return("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},re=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},oe=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var o=t.split("/"),r=0;r<o.length;r++)o[r].length>0&&n.push(o[r]);return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),o=n.getFront();if(null===r)return n;if(r===o)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),o=0;o<n.length&&o<r.length;o++){var i=V(n[o],r[o]);if(0!==i)return i}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),ie=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=_.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=_.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=_.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),ae="long_polling",se=function(){function e(e,t,n,r,o){void 0===o&&(o=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=T.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&T.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){_.assert("string"===typeof e,"typeof type must == string"),_.assert("object"===typeof t,"typeof params must == object");var n;if("websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==ae)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return _.forEach(t,function(e,t){r.push(e+"="+t)}),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}(),ue=function(e){var t=le(e),n=t.subdomain;"firebase"===t.domain&&L(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||L("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||U();var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new se(t.host,t.secure,n,r),path:new oe(t.pathString)}},le=function(e){var t="",n="",r="",a="",s=!0,u="https",l=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var h=e.indexOf("/");-1===h&&(h=e.length);var p=e.indexOf("?");-1===p&&(p=e.length),t=e.substring(0,Math.min(h,p)),h<p&&(a=o(e.substring(h,p)));var f=i(e.substring(Math.min(e.length,p)));c=t.indexOf(":"),c>=0?(s="https"===u||"wss"===u,l=parseInt(t.substring(c+1),10)):c=e.length;var d=t.split(".");3===d.length?(n=d[1],r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,c).toLowerCase()&&(n="localhost"),""===r&&"ns"in f&&(r=f.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:u,pathString:a}},ce=/[\[\].#$\/\u0000-\u001F\u007F]/,he=/[\[\].#$\u0000-\u001F\u007F]/,pe=function(e){return"string"===typeof e&&0!==e.length&&!ce.test(e)},fe=function(e){return"string"===typeof e&&0!==e.length&&!he.test(e)},de=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),fe(e)},ye=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!j(e)||e&&"object"===typeof e&&_.contains(e,".sv")},ve=function(e,t,n,r,o){o&&void 0===n||_e(_.errorPrefix(e,t,o),n,r)},_e=function(e,t,n){var r=n instanceof oe?new ie(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+r.toErrorString());if("function"===typeof t)throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(j(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if("string"===typeof t&&t.length>10485760/3&&_.stringLength(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){var o=!1,i=!1;if(_.forEach(t,function(t,n){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!pe(t)))throw new Error(e+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),_e(e,n,r),r.pop()}),o&&i)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ge=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var o=r.slice(),i=0;i<o.length;i++)if(".priority"===o[i]&&i===o.length-1);else if(!pe(o[i]))throw new Error(e+"contains an invalid key ("+o[i]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(oe.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},me=function(e,t,n,r,o){if(!o||void 0!==n){var i=_.errorPrefix(e,t,o);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(i+" must be an object containing the children to replace.");var a=[];_.forEach(n,function(e,t){var n=new oe(e);if(_e(i,t,r.child(n)),".priority"===n.getBack()&&!ye(t))throw new Error(i+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),ge(i,a)}},be=function(e,t,n,r){if(!r||void 0!==n){if(j(n))throw new Error(_.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ye(n))throw new Error(_.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ce=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(_.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ee=function(e,t,n,r){if((!r||void 0!==n)&&!pe(n))throw new Error(_.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},we=function(e,t,n,r){if((!r||void 0!==n)&&!fe(n))throw new Error(_.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Te=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),we(e,t,n,r)},Se=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},ke=function(e,t,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!pe(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!de(r))throw new Error(_.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ne=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(_.errorPrefix(e,t,r)+"must be a boolean.")},Re=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){_.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),_.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new _.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){_.validateArgCount("OnDisconnect.remove",0,1,arguments.length),Se("OnDisconnect.remove",this.path_),_.validateCallback("OnDisconnect.remove",1,e,!0);var t=new _.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){_.validateArgCount("OnDisconnect.set",1,2,arguments.length),Se("OnDisconnect.set",this.path_),ve("OnDisconnect.set",1,e,this.path_,!1),_.validateCallback("OnDisconnect.set",2,t,!0);var n=new _.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){_.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),Se("OnDisconnect.setWithPriority",this.path_),ve("OnDisconnect.setWithPriority",1,e,this.path_,!1),be("OnDisconnect.setWithPriority",2,t,!1),_.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new _.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(_.validateArgCount("OnDisconnect.update",1,2,arguments.length),Se("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,M("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}me("OnDisconnect.update",1,e,this.path_,!1),_.validateCallback("OnDisconnect.update",2,t,!0);var o=new _.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,o.wrapCallback(t)),o.promise},e}(),Pe=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return _.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),xe=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(r){var o=r===t;t=r;var i,a=new Array(8);for(i=7;i>=0;i--)a[i]=e.charAt(r%64),r=Math.floor(r/64);_.assert(0===r,"Cannot push at time == 0");var s=a.join("");if(o){for(i=11;i>=0&&63===n[i];i--)n[i]=0;n[i]++}else for(i=0;i<12;i++)n[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=e.charAt(n[i]);return _.assert(20===s.length,"nextPushId: Length should be 20."),s}}(),Oe=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Ie=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Oe(B,e),r=new Oe(B,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Oe.MIN},e}(),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return c},set:function(e){c=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return V(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw _.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Oe.MIN},t.prototype.maxPost=function(){return new Oe(H,c)},t.prototype.makePost=function(e,t){return _.assert("string"===typeof e,"KeyIndex indexValue must always be a string."),new Oe(e,c)},t.prototype.toString=function(){return".key"},t}(Ie),De=new Ae,Fe=function(e){return"number"===typeof e?"number:"+Y(e):"string:"+e},Le=function(e){if(e.isLeafNode()){var t=e.val();_.assert("string"===typeof t||"number"===typeof t||"object"===typeof t&&_.contains(t,".sv"),"Priority must be a string or number.")}else _.assert(e===h||e.isEmpty(),"priority of unexpected type.");_.assert(e===h||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Me=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,_.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Le(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(_.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Fe(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Y(this.value_):this.value_,this.lazyHash_=R(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(_.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),i=e.VALUE_TYPE_ORDER.indexOf(r);return _.assert(o>=0,"Unknown leaf type: "+n),_.assert(i>=0,"Unknown leaf type: "+r),o===i?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-o},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),Ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),o=n.compareTo(r);return 0===o?V(e.name,t.name):o},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Oe.MIN},t.prototype.maxPost=function(){return new Oe(H,new Me("[PRIORITY-POST]",d))},t.prototype.makePost=function(e,t){var n=f(e);return new Oe(t,new Me("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Ie),je=new Ue,We=function(){function e(e,t,n,r,o){void 0===o&&(o=null),this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];for(var i=1;!e.isEmpty();)if(e=e,i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Be=function(){function e(t,n,r,o,i){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=o?o:Ve.EMPTY_NODE,this.right=null!=i?i:Ve.EMPTY_NODE}return e.prototype.copy=function(t,n,r,o,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=i?i:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,o;return o=this,r=n(e,o.key),o=r<0?o.copy(null,null,null,o.left.insert(e,t,n),null):0===r?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,n)),o.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Ve.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},e.prototype.remove=function(e,t){var n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ve.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),He=function(){function e(){}return e.prototype.copy=function(e,t,n,r,o){return this},e.prototype.insert=function(e,t,n){return new Be(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Ve=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Be.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Be.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new We(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new We(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new We(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new We(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new He,e}(),qe=Math.log(2),Qe=function(){function e(e){this.count=function(e){return parseInt(Math.log(e)/qe,10)}(e+1),this.current_=this.count-1;var t=function(e){return parseInt(Array(e+1).join("1"),2)}(this.count);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),ze=function(e,t,n,r){e.sort(t);var o=function(t,r){var i,a,s=r-t;if(0==s)return null;if(1==s)return i=e[t],a=n?n(i):i,new Be(a,i.node,Be.BLACK,null,null);var u=parseInt(s/2,10)+t,l=o(t,u),c=o(u+1,r);return i=e[u],a=n?n(i):i,new Be(a,i.node,Be.BLACK,l,c)},i=new Qe(e.length),a=function(t){for(var r=null,i=null,a=e.length,s=function(t,r){var i=a-t,s=a;a-=t;var l=o(i+1,s),c=e[i],h=n?n(c):c;u(new Be(h,c.node,r,null,l))},u=function(e){r?(r.left=e,r=e):(i=e,r=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,Be.BLACK):(s(h,Be.BLACK),s(h,Be.RED))}return i}(i);return new Ve(r||t,a)},Ke={},Ge=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return _.assert(Ke&&je,"ChildrenNode.ts has not been loaded"),y=y||new e({".priority":Ke},{".priority":je})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=_.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===Ke?null:t},e.prototype.hasIndex=function(e){return _.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){_.assert(t!==De,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],o=!1,i=n.getIterator(Oe.Wrap),a=i.getNext();a;)o=o||t.isDefinedOn(a.node),r.push(a),a=i.getNext();var s;s=o?ze(r,t.getCompare()):Ke;var u=t.toString(),l=_.clone(this.indexSet_);l[u]=t;var c=_.clone(this.indexes_);return c[u]=s,new e(c,l)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(_.map(this.indexes_,function(e,o){var i=_.safeGet(r.indexSet_,o);if(_.assert(i,"Missing index implementation for "+o),e===Ke){if(i.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(Oe.Wrap),u=s.getNext();u;)u.name!=t.name&&a.push(u),u=s.getNext();return a.push(t),ze(a,i.getCompare())}return Ke}var l=n.get(t.name),c=e;return l&&(c=c.remove(new Oe(t.name,l))),c.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(_.map(this.indexes_,function(e){if(e===Ke)return e;var r=n.get(t.name);return r?e.remove(new Oe(t.name,r)):e}),this.indexSet_)},e}(),Ye=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Le(this.priorityNode_),this.children_.isEmpty()&&_.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return v||(v=new e(new Ve(s),null,Ge.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||v},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?v:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(_.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new Oe(t,n),o=void 0,i=void 0,a=void 0;return n.isEmpty()?(o=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(r,this.children_)),a=o.isEmpty()?v:this.priorityNode_,new e(o,a,i)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;_.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,o=0,i=!0;if(this.forEachChild(je,function(a,s){n[a]=s.val(t),r++,i&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):i=!1}),!t&&i&&o<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Fe(this.getPriority().val())+":"),this.forEachChild(je,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":R(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var o=r.getPredecessorKey(new Oe(e,t));return o?o.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Oe(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Oe(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,Oe.Wrap),o=r.peek();null!=o&&t.compare(o,e)<0;)r.getNext(),o=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,Oe.Wrap),o=r.peek();null!=o&&t.compare(o,e)>0;)r.getNext(),o=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===$e?-1:0},e.prototype.withIndex=function(t){if(t===De||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===De||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(je),r=t.getIterator(je),o=n.getNext(),i=r.getNext();o&&i;){if(o.name!==i.name||!o.node.equals(i.node))return!1;o=n.getNext(),i=r.getNext()}return null===o&&null===i}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===De?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Xe=function(e){function t(){return e.call(this,new Ve(s),Ye.EMPTY_NODE,Ge.Default)||this}return m.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return Ye.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Ye),$e=new Xe;Object.defineProperties(Oe,{MIN:{value:new Oe(B,Ye.EMPTY_NODE)},MAX:{value:new Oe(H,$e)}}),Ae.__EMPTY_NODE=Ye.EMPTY_NODE,Me.__childrenNodeConstructor=Ye,function(e){h=e}($e),function(e){d=e}($e);var Je=!0;!function(e){f=e}(u);var Ze,et,tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?V(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Oe.MIN},t.prototype.maxPost=function(){return Oe.MAX},t.prototype.makePost=function(e,t){var n=u(e);return new Oe(t,n)},t.prototype.toString=function(){return".value"},t}(Ie),nt=new tt,rt=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,_.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return m.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),o=n.compareTo(r);return 0===o?V(e.name,t.name):o},t.prototype.makePost=function(e,t){var n=u(e),r=Ye.EMPTY_NODE.updateChild(this.indexPath_,n);return new Oe(t,r)},t.prototype.maxPost=function(){var e=Ye.EMPTY_NODE.updateChild(this.indexPath_,$e);return new Oe(H,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(Ie),ot=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return _.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return _.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return _.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return _.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){_.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),we("DataSnapshot.child",1,t,!1);var n=new oe(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,je)},e.prototype.hasChild=function(e){_.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),we("DataSnapshot.hasChild",1,e,!1);var t=new oe(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return _.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;return _.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),_.validateCallback("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,o){return t(new e(o,n.ref_.child(r),je))})},e.prototype.hasChildren=function(){return _.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return _.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return _.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),it=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+_.stringify(this.snapshot.exportVal())},e}(),at=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),st=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new it("value",this,new ot(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){_.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new at(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),ut=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,_.contains(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new at(this,e,t):null},e.prototype.createEvent=function(e,t){_.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new it(e.type,this,new ot(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){_.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=_.getCount(t.callbacks_);if(n===_.getCount(this.callbacks_)){if(1===n){var r=_.getAnyKey(t.callbacks_),o=_.getAnyKey(this.callbacks_);return o===r&&(!t.callbacks_[r]||!this.callbacks_[o]||t.callbacks_[r]===this.callbacks_[o])}return _.every(this.callbacks_,function(e,n){return t.callbacks_[e]===n})}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),lt=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return _.assert(Ze,"Reference.ts has not been loaded"),Ze},set:function(e){Ze=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===De){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=B)throw new Error(r);if("string"!==typeof t)throw new Error(o)}if(e.hasEnd()){if(e.getIndexEndName()!=H)throw new Error(r);if("string"!==typeof n)throw new Error(o)}}else if(e.getIndex()===je){if(null!=t&&!ye(t)||null!=n&&!ye(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(_.assert(e.getIndex()instanceof rt||e.getIndex()===nt,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return _.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,o){_.validateArgCount("Query.on",2,4,arguments.length),Ce("Query.on",1,t,!1),_.validateCallback("Query.on",2,n,!1);var i=e.getCancelAndContextArgs_("Query.on",r,o);if("value"===t)this.onValueEvent(n,i.cancel,i.context);else{var a={};a[t]=n,this.onChildEvent(a,i.cancel,i.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new st(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new ut(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){_.validateArgCount("Query.off",0,3,arguments.length),Ce("Query.off",1,e,!0),_.validateCallback("Query.off",2,t,!0),_.validateContextObject("Query.off",3,n,!0);var r=null,o=null;if("value"===e){r=new st(t||null,null,n||null)}else e&&(t&&(o={},o[e]=t),r=new ut(o,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,o){var i=this;_.validateArgCount("Query.once",1,4,arguments.length),Ce("Query.once",1,t,!1),_.validateCallback("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,o),s=!0,u=new _.Deferred;u.promise.catch(function(){});var l=function(e){s&&(s=!1,i.off(t,l),n&&n.bind(a.context)(e),u.resolve(e))};return this.on(t,l,function(e){i.off(t,l),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)}),u.promise},e.prototype.limitToFirst=function(t){if(_.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(_.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(_.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');we("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new oe(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new rt(n),o=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(o),new e(this.repo,this.path,o,!0)},e.prototype.orderByKey=function(){_.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(De);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){_.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(je);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){_.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(nt);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),_.validateArgCount("Query.startAt",0,2,arguments.length),ve("Query.startAt",1,t,this.path,!0),Ee("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),_.validateArgCount("Query.endAt",0,2,arguments.length),ve("Query.endAt",1,t,this.path,!0),Ee("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(_.validateArgCount("Query.equalTo",1,2,arguments.length),ve("Query.equalTo",1,e,this.path,!1),Ee("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return _.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return _.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=z(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(_.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===t.repo,r=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return n&&r&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,_.validateCallback(e,3,r.cancel,!0),r.context=n,_.validateContextObject(e,4,r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(_.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),ct=function(){function e(){this.set={}}return e.prototype.add=function(e,t){this.set[e]=null===t||t},e.prototype.contains=function(e){return _.contains(this.set,e)},e.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},e.prototype.remove=function(e){delete this.set[e]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return _.isEmpty(this.set)},e.prototype.count=function(){return _.getCount(this.set)},e.prototype.each=function(e){_.forEach(this.set,function(t,n){return e(t,n)})},e.prototype.keys=function(){var e=[];return _.forEach(this.set,function(t){e.push(t)}),e},e}(),ht=function(){function e(){this.value_=null,this.children_=null}return e.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();if(e=e.popFront(),this.children_.contains(t)){return this.children_.get(t).find(e)}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,n);else{null==this.children_&&(this.children_=new ct);var r=t.getFront();this.children_.contains(r)||this.children_.add(r,new e);var o=this.children_.get(r);t=t.popFront(),o.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(je,function(e,t){n.remember(new oe(e),t)}),this.forget(e)}if(null!==this.children_){var r=e.getFront();if(e=e.popFront(),this.children_.contains(r)){this.children_.get(r).forget(e)&&this.children_.remove(r)}return!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},e.prototype.forEachTree=function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild(function(n,r){var o=new oe(e.toString()+"/"+n);r.forEachTree(o,t)})},e.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each(function(t,n){e(t,n)})},e}(),pt=function(e){return e=e||{},e.timestamp=e.timestamp||(new Date).getTime(),e},ft=function(e,t){return e&&"object"===typeof e?(_.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},dt=function(e,t){var n=new ht;return e.forEachTree(new oe(""),function(e,r){n.remember(e,yt(r,t))}),n},yt=function(e,t){var n,r=e.getPriority().val(),o=ft(r,t);if(e.isLeafNode()){var i=e,a=ft(i.getValue(),t);return a!==i.getValue()||o!==i.getPriority().val()?new Me(a,u(o)):e}var s=e;return n=s,o!==s.getPriority().val()&&(n=n.updatePriority(new Me(o))),s.forEachChild(je,function(e,r){var o=yt(r,t);o!==r&&(n=n.updateImmediateChild(e,o))}),n};!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(et||(et={}));var vt,_t,gt=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,_.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),mt=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=et.ACK_USER_WRITE,this.source=gt.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return _.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new oe(t));return new e(oe.Empty,n,this.revert)}return _.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),bt=function(){return vt||(vt=new Ve(q)),vt},Ct=function(){function e(e,t){void 0===t&&(t=bt()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return _.forEach(t,function(e,t){n=n.set(new oe(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:oe.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var o=r.findRootMostMatchingPathAndValue(e.popFront(),t);if(null!=o){return{path:new oe(n).child(o.path),value:o.value}}return null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),o=this.children.get(r)||e.Empty,i=o.set(t.popFront(),n),a=this.children.insert(r,i);return new e(this.value,a)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var o=r.remove(t.popFront()),i=void 0;return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?e.Empty:new e(this.value,i)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),o=this.children.get(r)||e.Empty,i=o.setTree(t.popFront(),n),a=void 0;return a=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,a)},e.prototype.fold=function(e){return this.fold_(oe.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,o){n[r]=o.fold_(e.child(r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,oe.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var o=e.getFront(),i=this.children.get(o);return i?i.findOnPath_(e.popFront(),t.child(o),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,oe.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var o=t.getFront(),i=this.children.get(o);return i?i.foreachOnPath_(t.popFront(),n.child(o),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(oe.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}(),Et=function(){function e(e,t){this.source=e,this.path=t,this.type=et.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,oe.Empty):new e(this.source,this.path.popFront())},e}(),wt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=et.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,oe.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),Tt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=et.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new oe(t));return n.isEmpty()?null:n.value?new wt(this.source,oe.Empty,n.value):new e(this.source,oe.Empty,n)}return _.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),St=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),kt=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new St(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new St(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new St(Ye.EMPTY_NODE,!1,!1),new St(Ye.EMPTY_NODE,!1,!1)),e}(),Nt=function(){function e(e,t,n,r,o){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=o}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),Rt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,o,i){_.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?e:(null!=i&&(n.isEmpty()?e.hasChild(t)?i.trackChildChange(Nt.childRemovedChange(t,a)):_.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?i.trackChildChange(Nt.childAddedChange(t,n)):i.trackChildChange(Nt.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(je,function(e,r){t.hasChild(e)||n.trackChildChange(Nt.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(je,function(t,r){if(e.hasChild(t)){var o=e.getImmediateChild(t);o.equals(r)||n.trackChildChange(Nt.childChangedChange(t,r,o))}else n.trackChildChange(Nt.childAddedChange(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?Ye.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Pt=function(){function e(){this.changeMap_={}}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;_.assert(t==Nt.CHILD_ADDED||t==Nt.CHILD_CHANGED||t==Nt.CHILD_REMOVED,"Only child changes supported for tracking"),_.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=_.safeGet(this.changeMap_,n);if(r){var o=r.type;if(t==Nt.CHILD_ADDED&&o==Nt.CHILD_REMOVED)this.changeMap_[n]=Nt.childChangedChange(n,e.snapshotNode,r.snapshotNode);else if(t==Nt.CHILD_REMOVED&&o==Nt.CHILD_ADDED)delete this.changeMap_[n];else if(t==Nt.CHILD_REMOVED&&o==Nt.CHILD_CHANGED)this.changeMap_[n]=Nt.childRemovedChange(n,r.oldSnap);else if(t==Nt.CHILD_CHANGED&&o==Nt.CHILD_ADDED)this.changeMap_[n]=Nt.childAddedChange(n,e.snapshotNode);else{if(t!=Nt.CHILD_CHANGED||o!=Nt.CHILD_CHANGED)throw _.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap_[n]=Nt.childChangedChange(n,e.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=e},e.prototype.getChanges=function(){return _.getValues(this.changeMap_)},e}(),xt=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}(),Ot=new xt,It=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new St(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),o=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===o.length?null:o[0]},e}(),At=function(){function e(e,t){this.viewCache=e,this.changes=t}return e}(),Dt=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){_.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),_.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,o){var i,a,s=new Pt;if(n.type===et.OVERWRITE){var u=n;u.source.fromUser?i=this.applyUserOverwrite_(t,u.path,u.snap,r,o,s):(_.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),i=this.applyServerOverwrite_(t,u.path,u.snap,r,o,a,s))}else if(n.type===et.MERGE){var l=n;l.source.fromUser?i=this.applyUserMerge_(t,l.path,l.children,r,o,s):(_.assert(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.getServerCache().isFiltered(),i=this.applyServerMerge_(t,l.path,l.children,r,o,a,s))}else if(n.type===et.ACK_USER_WRITE){var c=n;i=c.revert?this.revertUserWrite_(t,c.path,r,o,s):this.ackUserWrite_(t,c.path,c.affectedTree,r,o,s)}else{if(n.type!==et.LISTEN_COMPLETE)throw _.assertionError("Unknown operation type: "+n.type);i=this.listenComplete_(t,n.path,r,s)}var h=s.getChanges();return e.maybeAddValueEvent_(t,i,h),new At(i,h)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var o=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||o&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Nt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,o){var i=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(_.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),l=u instanceof Ye?u:Ye.EMPTY_NODE,c=n.calcCompleteEventChildren(l);a=this.filter_.updateFullNode(e.getEventCache().getNode(),c,o)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),h,o)}else{var p=t.getFront();if(".priority"==p){_.assert(1==t.getLength(),"Can't have a priority with additional path components");var f=i.getNode();s=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,f,s);a=null!=d?this.filter_.updatePriority(f,d):i.getNode()}else{var y=t.popFront(),v=void 0;if(i.isCompleteForChild(p)){s=e.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(t,i.getNode(),s);v=null!=g?i.getNode().getImmediateChild(p).updateChild(y,g):i.getNode().getImmediateChild(p)}else v=n.calcCompleteChild(p,e.getServerCache());a=null!=v?this.filter_.updateChild(i.getNode(),p,v,y,r,o):i.getNode()}}return e.updateEventSnap(a,i.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,o,i,a){var s,u=e.getServerCache(),l=i?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=l.updateFullNode(u.getNode(),n,null);else if(l.filtersNodes()&&!u.isFiltered()){var c=u.getNode().updateChild(t,n);s=l.updateFullNode(u.getNode(),c,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var p=t.popFront(),f=u.getNode().getImmediateChild(h),d=f.updateChild(p,n);s=".priority"==h?l.updatePriority(u.getNode(),d):l.updateChild(u.getNode(),h,d,p,Ot,null)}var y=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),l.filtersNodes()),v=new It(r,y,o);return this.generateEventCacheAfterServerEvent_(y,t,r,v,a)},e.prototype.applyUserOverwrite_=function(e,t,n,r,o,i){var a,s,u=e.getEventCache(),l=new It(r,e,o);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,i),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var c=t.getFront();if(".priority"===c)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),p=u.getNode().getImmediateChild(c),f=void 0;if(h.isEmpty())f=n;else{var d=l.getCompleteChild(c);f=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Ye.EMPTY_NODE}if(p.equals(f))a=e;else{var y=this.filter_.updateChild(u.getNode(),c,f,h,l,i);a=e.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,o,i,a){var s=this,u=t;return r.foreach(function(r,l){var c=n.child(r);e.cacheHasChild_(t,c.getFront())&&(u=s.applyUserOverwrite_(u,c,l,o,i,a))}),r.foreach(function(r,l){var c=n.child(r);e.cacheHasChild_(t,c.getFront())||(u=s.applyUserOverwrite_(u,c,l,o,i,a))}),u},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,r,o,i,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,l=e;u=t.isEmpty()?n:Ct.Empty.setTree(t,n);var c=e.getServerCache().getNode();return u.children.inorderTraversal(function(t,n){if(c.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=s.applyMerge_(u,n);l=s.applyServerOverwrite_(l,new oe(t),h,r,o,i,a)}}),u.children.inorderTraversal(function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!c.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),p=s.applyMerge_(h,n);l=s.applyServerOverwrite_(l,new oe(t),p,r,o,i,a)}}),l},e.prototype.ackUserWrite_=function(e,t,n,r,o,i){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,o,a,i);if(t.isEmpty()){var u=Ct.Empty;return s.getNode().forEachChild(De,function(e,t){u=u.set(new oe(e),t)}),this.applyServerMerge_(e,t,u,r,o,a,i)}return e}var l=Ct.Empty;return n.foreach(function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))}),this.applyServerMerge_(e,t,l,r,o,a,i)},e.prototype.listenComplete_=function(e,t,n,r){var o=e.getServerCache(),i=e.updateServerSnap(o.getNode(),o.isFullyInitialized()||t.isEmpty(),o.isFiltered());return this.generateEventCacheAfterServerEvent_(i,t,n,Ot,r)},e.prototype.revertUserWrite_=function(e,t,n,r,o){var i;if(null!=n.shadowingWrite(t))return e;var a=new It(n,e,r),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var l=void 0;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var c=e.getServerCache().getNode();_.assert(c instanceof Ye,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(c)}l=l,u=this.filter_.updateFullNode(s,l,o)}else{var h=t.getFront(),p=n.calcCompleteChild(h,e.getServerCache());null==p&&e.getServerCache().isCompleteForChild(h)&&(p=s.getImmediateChild(h)),u=null!=p?this.filter_.updateChild(s,h,p,t.popFront(),a,o):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,Ye.EMPTY_NODE,t.popFront(),a,o):s,u.isEmpty()&&e.getServerCache().isFullyInitialized()&&(i=n.calcCompleteEventCache(e.getCompleteServerSnap()),i.isLeafNode()&&(u=this.filter_.updateFullNode(u,i,o)))}return i=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(oe.Empty),e.updateEventSnap(u,i,this.filter_.filtersNodes())},e}(),Ft=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,o=[],i=[];return e.forEach(function(e){e.type===Nt.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&i.push(Nt.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(o,Nt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(o,Nt.CHILD_ADDED,e,n,t),this.generateEventsForType_(o,Nt.CHILD_MOVED,i,n,t),this.generateEventsForType_(o,Nt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(o,Nt.VALUE,e,n,t),o},e.prototype.generateEventsForType_=function(e,t,n,r,o){var i=this,a=n.filter(function(e){return e.type===t});a.sort(this.compareChanges_.bind(this)),a.forEach(function(t){var n=i.materializeSingleChange_(t,o);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,i.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw _.assertionError("Should only compare child_ events.");var n=new Oe(e.childName,e.snapshotNode),r=new Oe(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),Lt=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Rt(n.getIndex()),o=n.getNodeFilter();this.processor_=new Dt(o);var i=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(Ye.EMPTY_NODE,i.getNode(),null),u=o.updateFullNode(Ye.EMPTY_NODE,a.getNode(),null),l=new St(s,i.isFullyInitialized(),r.filtersNodes()),c=new St(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new kt(c,l),this.eventGenerator_=new Ft(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){_.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var o=e.createCancelEvent(t,r);o&&n.push(o)})}if(e){for(var o=[],i=0;i<this.eventRegistrations_.length;++i){var a=this.eventRegistrations_[i];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(i+1));break}}else o.push(a)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===et.MERGE&&null!==e.source.queryId&&(_.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),_.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,o=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(o.viewCache),_.assert(o.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];if(!t.getNode().isLeafNode()){t.getNode().forEachChild(je,function(e,t){n.push(Nt.childAddedChange(e,t))})}return t.isFullyInitialized()&&n.push(Nt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}(),Mt=function(){function e(){this.views_={}}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return _.assert(_t,"Reference.ts has not been loaded"),_t},set:function(e){_.assert(!_t,"__referenceConstructor has already been defined"),_t=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return _.isEmpty(this.views_)},e.prototype.applyOperation=function(e,t,n){var r=e.source.queryId;if(null!==r){var o=_.safeGet(this.views_,r);return _.assert(null!=o,"SyncTree gave us an op for an invalid query."),o.applyOperation(e,t,n)}var i=[];return _.forEach(this.views_,function(r,o){i=i.concat(o.applyOperation(e,t,n))}),i},e.prototype.addEventRegistration=function(e,t,n,r,o){var i=e.queryIdentifier(),a=_.safeGet(this.views_,i);if(!a){var s=n.calcCompleteEventCache(o?r:null),u=!1;s?u=!0:r instanceof Ye?(s=n.calcCompleteEventChildren(r),u=!1):(s=Ye.EMPTY_NODE,u=!1);var l=new kt(new St(s,u,!1),new St(r,o,!1));a=new Lt(e,l),this.views_[i]=a}return a.addEventRegistration(t),a.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var o=t.queryIdentifier(),i=[],a=[],s=this.hasCompleteView();if("default"===o){var u=this;_.forEach(this.views_,function(e,t){a=a.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete u.views_[e],t.getQuery().getQueryParams().loadsAllData()||i.push(t.getQuery()))})}else{var l=_.safeGet(this.views_,o);l&&(a=a.concat(l.removeEventRegistration(n,r)),l.isEmpty()&&(delete this.views_[o],l.getQuery().getQueryParams().loadsAllData()||i.push(l.getQuery())))}return s&&!this.hasCompleteView()&&i.push(new e.__referenceConstructor(t.repo,t.path)),{removed:i,events:a}},e.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map(function(t){return e.views_[t]}).filter(function(e){return!e.getQuery().getQueryParams().loadsAllData()})},e.prototype.getCompleteServerCache=function(e){var t=null;return _.forEach(this.views_,function(n,r){t=t||r.getCompleteServerCache(e)}),t},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return _.safeGet(this.views_,t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){return _.findValue(this.views_,function(e){return e.getQuery().getQueryParams().loadsAllData()})||null},e}(),Ut=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new Ct(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var o=r.path,i=r.value,a=oe.relativePath(o,t);return i=i.updateChild(a,n),new e(this.writeTree_.set(o,i))}var s=new Ct(n);return new e(this.writeTree_.setTree(t,s))},e.prototype.addWrites=function(e,t){var n=this;return _.forEach(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,Ct.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(oe.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(je,function(t,n){e.push(new Oe(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Oe(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new Ct(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(t){return e.applySubtreeWrite_(oe.Empty,this.writeTree_,t)},e.Empty=new e(new Ct(null)),e.applySubtreeWrite_=function(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var o=null;return n.children.inorderTraversal(function(n,i){".priority"===n?(_.assert(null!==i.value,"Priority writes must always be leaf nodes"),o=i.value):r=e.applySubtreeWrite_(t.child(n),i,r)}),r.getChild(t).isEmpty()||null===o||(r=r.updateChild(t.child(".priority"),o)),r},e}(),jt=function(){function e(){this.visibleWrites_=Ut.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new Wt(e,this)},e.prototype.addOverwrite=function(e,t,n,r){_.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){_.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});_.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var o=r.visible,i=!1,a=this.allWrites_.length-1;o&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?o=!1:r.path.contains(s.path)&&(i=!0)),a--}if(o){if(i)return this.resetTree_(),!0;if(r.snap)this.visibleWrites_=this.visibleWrites_.removeWrite(r.path);else{var u=r.children;_.forEach(u,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))})}return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,o){if(r||o){var i=this.visibleWrites_.childCompoundWrite(t);if(!o&&i.isEmpty())return n;if(o||null!=n||i.hasCompleteWrite(oe.Empty)){var a=function(e){return(e.visible||o)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},s=e.layerTree_(this.allWrites_,a,t),u=n||Ye.EMPTY_NODE;return s.apply(u)}return null}var l=this.visibleWrites_.getCompleteNode(t);if(null!=l)return l;var c=this.visibleWrites_.childCompoundWrite(t);if(c.isEmpty())return n;if(null!=n||c.hasCompleteWrite(oe.Empty)){var u=n||Ye.EMPTY_NODE;return c.apply(u)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=Ye.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(je,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var o=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(je,function(e,t){var r=o.childCompoundWrite(new oe(e)).apply(t);n=n.updateImmediateChild(e,r)}),o.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){_.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(t);if(this.visibleWrites_.hasCompleteWrite(o))return null;var i=this.visibleWrites_.childCompoundWrite(o);return i.isEmpty()?r.getChild(t):i.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),o=this.visibleWrites_.getCompleteNode(r);if(null!=o)return o;if(n.isCompleteForChild(t)){return this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t))}return null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,o,i){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(oe.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if(a=a.withIndex(i),a.isEmpty()||a.isLeafNode())return[];for(var l=[],c=i.getCompare(),h=o?a.getReverseIteratorFrom(n,i):a.getIteratorFrom(n,i),p=h.getNext();p&&l.length<r;)0!==c(p,n)&&l.push(p),p=h.getNext();return l},e.prototype.recordContainsPath_=function(e,t){return e.snap?e.path.contains(t):!!_.findKey(e.children,function(n,r){return e.path.child(r).contains(t)})},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,oe.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=Ut.Empty,o=0;o<e.length;++o){var i=e[o];if(t(i)){var a=i.path,s=void 0;if(i.snap)n.contains(a)?(s=oe.relativePath(n,a),r=r.addWrite(s,i.snap)):a.contains(n)&&(s=oe.relativePath(a,n),r=r.addWrite(oe.Empty,i.snap.getChild(s)));else{if(!i.children)throw _.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=oe.relativePath(n,a),r=r.addWrites(s,i.children);else if(a.contains(n))if(s=oe.relativePath(a,n),s.isEmpty())r=r.addWrites(oe.Empty,i.children);else{var u=_.safeGet(i.children,s.getFront());if(u){var l=u.getChild(s.popFront());r=r.addWrite(oe.Empty,l)}}}}}return r},e}(),Wt=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,o){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,o)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),Bt=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=Ct.Empty,this.pendingWriteTree_=new jt,this.tagToQueryMap_={},this.queryToTagMap_={}}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new wt(gt.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=Ct.fromObject(t);return this.applyOperationToSyncPoints_(new Tt(gt.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=Ct.Empty;return null!=n.snap?r=r.set(oe.Empty,!0):_.forEach(n.children,function(e,t){r=r.set(new oe(e),t)}),this.applyOperationToSyncPoints_(new mt(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new wt(gt.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=Ct.fromObject(t);return this.applyOperationToSyncPoints_(new Tt(gt.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new Et(gt.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var o=this.queryKeyForTag_(r);if(null!=o){var i=e.parseQueryKey_(o),a=i.path,s=i.queryId,u=oe.relativePath(a,t),l=new wt(gt.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,l)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var o=this.queryKeyForTag_(r);if(o){var i=e.parseQueryKey_(o),a=i.path,s=i.queryId,u=oe.relativePath(a,t),l=Ct.fromObject(n),c=new Tt(gt.forServerTaggedQuery(s),u,l);return this.applyTaggedOperation_(a,c)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var o=e.parseQueryKey_(r),i=o.path,a=o.queryId,s=oe.relativePath(i,t),u=new Et(gt.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(i,u)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,o=null,i=!1;this.syncPointTree_.foreachOnPath(r,function(e,t){var n=oe.relativePath(e,r);o=o||t.getCompleteServerCache(n),i=i||t.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(i=i||a.hasCompleteView(),o=o||a.getCompleteServerCache(oe.Empty)):(a=new Mt,this.syncPointTree_=this.syncPointTree_.set(r,a));var s;if(null!=o)s=!0;else{s=!1,o=Ye.EMPTY_NODE;this.syncPointTree_.subtree(r).foreachChild(function(e,t){var n=t.getCompleteServerCache(oe.Empty);n&&(o=o.updateImmediateChild(e,n))})}var u=a.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var l=e.makeQueryKey_(t);_.assert(!(l in this.queryToTagMap_),"View does not exist, but we have a tag");var c=e.getNextQueryTag_();this.queryToTagMap_[l]=c,this.tagToQueryMap_["_"+c]=l}var h=this.pendingWriteTree_.childWrites(r),p=a.addEventRegistration(t,n,h,o,s);if(!u&&!i){var f=a.viewForQuery(t);p=p.concat(this.setupListener_(t,f))}return p},e.prototype.removeEventRegistration=function(t,n,r){var o=this,i=t.path,a=this.syncPointTree_.get(i),s=[];if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var l=u.removed;s=u.events;var c=-1!==l.findIndex(function(e){return e.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(e,t){return t.hasCompleteView()});if(c&&!h){var p=this.syncPointTree_.subtree(i);if(!p.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(p),d=0;d<f.length;++d){var y=f[d],v=y.getQuery(),_=this.createListenerForView_(y);this.listenProvider_.startListening(e.queryForListening_(v),this.tagForQuery_(v),_.hashFn,_.onComplete)}}if(!h&&l.length>0&&!r)if(c){this.listenProvider_.stopListening(e.queryForListening_(t),null)}else l.forEach(function(t){var n=o.queryToTagMap_[e.makeQueryKey_(t)];o.listenProvider_.stopListening(e.queryForListening_(t),n)});this.removeTags_(l)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var r=oe.relativePath(t,e),o=n.getCompleteServerCache(r);if(o)return o});return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView()){return[t.getCompleteView()]}var r=[];return t&&(r=t.getQueryViews()),_.forEach(n,function(e,t){r=r.concat(t)}),r})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var o=e.makeQueryKey_(r),i=this.queryToTagMap_[o];delete this.queryToTagMap_[o],delete this.tagToQueryMap_["_"+i]}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,o=this.tagForQuery_(t),i=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),o,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(r);if(o)_.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),_.forEach(n,function(e,t){r=r.concat(t)}),r}),l=0;l<u.length;++l){var c=u[l];this.listenProvider_.stopListening(e.queryForListening_(c),this.tagForQuery_(c))}return a},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||Ye.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var o=J(e,n);return t.removeEventRegistration(n,null,o)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return _.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new oe(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return _.safeGet(this.queryToTagMap_,n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);_.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(oe.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var o=t.get(oe.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(oe.Empty));var i=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var l=n?n.getImmediateChild(a):null,c=r.child(a);i=i.concat(this.applyOperationHelper_(s,u,l,c))}return o&&(i=i.concat(o.applyOperation(e,r,n))),i},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var o=this,i=t.get(oe.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(oe.Empty));var a=[];return t.children.inorderTraversal(function(t,i){var s=n?n.getImmediateChild(t):null,u=r.child(t),l=e.operationForChild(t);l&&(a=a.concat(o.applyOperationDescendantsHelper_(l,i,s,u)))}),i&&(a=a.concat(i.applyOperation(e,r,n))),a},e.nextQueryTag_=1,e}(),Ht=function(){function e(){this.rootNode_=Ye.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Vt=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,function(e){return e&&"auth/token-not-initialized"===e.code?(A("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',M(e)},e}(),qt=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),_.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return _.deepCopy(this.counters_)},e}(),Qt=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new qt),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),zt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=_.clone(e);return this.last_&&_.forEach(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),Kt=1e4,Gt=3e4,Yt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new zt(e);var n=Kt+(Gt-Kt)*Math.random();re(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;_.forEach(t,function(t,o){o>0&&_.contains(e.statsToReport_,t)&&(n[t]=o,r=!0)}),r&&this.server_.reportStats(n),re(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Xt=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],o=r.getPath();null===t||o.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new $t(o)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r){e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),$t=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();x&&A("event: "+t.toString()),te(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Jt=function(){function e(e){this.allowedEvents_=e,this.listeners_={},_.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],o=0;o<r.length;o++)if(r[o].callback===t&&(!n||n===r[o].context))return void r.splice(o,1)},e.prototype.validateEventType_=function(e){_.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),Zt=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return m.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return _.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Jt),en=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||_.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return m.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return _.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Jt),tn=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&te(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},e}(),nn="pLPCommand",rn="pRTLPCB",on=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=D(e),this.stats_=Qt.getCollection(t),this.urlFn=function(e){return t.connectionURL(ae,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new tn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),W(function(){if(!n.isClosed_){n.scriptTagHolder=new an(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],o=e[1],i=e[2];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=o,n.password=i;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],o=e[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(r,o)},function(){n.onClosed_()},n.urlFn);var e={};e.start="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),!_.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!X()&&!$()&&!_.isNodeSdk()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=_.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=_.base64Encode(t),r=K(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!_.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n.dframe="t",n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=_.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),an=function(){function e(t,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new ct,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,_.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=N(),window[nn+this.uniqueCallbackIdentifier]=t,window[rn+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){i='<script>document.domain="'+document.domain+'";<\/script>'}var a="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(e){A("frame writing exception"),e.stack&&A(e.stack),A(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||A("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var t=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0))),_.isNodeSdk()&&this.myID){var n={};n.disconn="t",n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);e.nodeRestRequest(r)}var o=this.onDisconnect;o&&(this.onDisconnect=null,o())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var o=this.pendingSegs.shift();n=n+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t,1);var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},o=setTimeout(r,Math.floor(25e3)),i=function(){clearTimeout(o),r()};this.addTag(e,i)},e.prototype.addTag=function(e,t){var n=this;_.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){A("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}},Math.floor(1))},e}(),sn=null;"undefined"!==typeof MozWebSocket?sn=MozWebSocket:"undefined"!==typeof WebSocket&&(sn=WebSocket);var un=function(){function e(t,n,r,o){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=D(this.connId),this.stats_=Qt.getCollection(n),this.connURL=e.connectionURL_(n,r,o)}return e.connectionURL_=function(e,t,n){var r={};return r.v="5",!_.isNodeSdk()&&"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,T.set("previous_websocket_failure",!0);try{if(_.isNodeSdk()){var o=_.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+b.SDK_VERSION+"/"+r.platform+"/"+o}},a=Object({NODE_ENV:"production",PUBLIC_URL:"/class"}),s=0==this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new sn(this.connURL,[],i)}else this.mySock=new sn(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var u=e.message||e.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==sn&&!e.forceDisallow_},e.previouslyFailed=function(){return T.isInMemoryStorage||!0===T.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){T.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=_.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(_.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=_.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=K(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),ln=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[on,un]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n=un&&un.isAvailable(),r=n&&!un.previouslyFailed();if(t.webSocketOnly&&(n||M("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[un];else{var o=this.transports_=[];G(e.ALL_TRANSPORTS,function(e,t){t&&t.isAvailable()&&o.push(t)})}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),cn=function(){function e(e,t,n,r,o,i,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=o,this.onKill_=i,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=D("c:"+this.id+":"),this.transportManager_=new ln(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=re(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(o)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=Q("t",e),n=Q("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=Q("t",e),n=Q("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||--this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy())},e.prototype.onControl_=function(e){var t=Q("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?F("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):F("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&M("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),re(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):re(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(T.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),hn=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),pn=1e3,fn=3e5,dn=function(e){function t(n,r,o,i,a,s){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=o,u.onServerInfoUpdate_=i,u.authTokenProvider_=a,u.authOverride_=s,u.id=t.nextPersistentConnectionId_++,u.log_=D("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=pn,u.maxReconnectDelay_=fn,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!_.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),Zt.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&en.getInstance().on("online",u.onOnline_,u),u}return m.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,o={r:r,a:e,b:t};this.log_(_.stringify(o)),_.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var o=e.queryIdentifier(),i=e.path.toString();this.log_("Listen called for "+i+" "+o),this.listens_[i]=this.listens_[i]||{},_.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),_.assert(!this.listens_[i][o],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[i][o]=a,this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,r=e.query,o=r.path.toString(),i=r.queryIdentifier();this.log_("Listen on "+o+" for "+i);var a={p:o};e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens_[o]&&n.listens_[o][i])===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(o,i),e.onComplete&&e.onComplete(u,s))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&_.contains(e,"w")){var n=_.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',o=t.path.toString();M("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||_.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=_.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,o=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,o))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),_.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var o={p:e};r&&(o.q=n,o.t=r),this.sendRequest("n",o)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var o={p:t,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,o){var i={p:t,d:n};void 0!==o&&(i.h=o),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),o&&o(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+_.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):F("Unrecognized action received from server: "+_.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;_.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>3e4&&(this.reconnectDelay_=pn),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,i=this,a=this.lastSessionId,s=!1,u=null,l=function(){u?u.close():(s=!0,r())},c=function(e){_.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)};this.realtime_={close:l,sendRequest:c};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(t){s?A("getToken() completed but was canceled"):(A("getToken() completed. Creating connection."),i.authToken_=t&&t.accessToken,u=new cn(o,i.repoInfo_,e,n,r,function(e){M(e+" ("+i.repoInfo_.toString()+")"),i.interrupt("server_kill")},a))}).then(null,function(e){i.log_("Failed to get token: "+e),s||(_.CONSTANTS.NODE_ADMIN&&M(e),l())})}},t.prototype.interrupt=function(e){A("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){A("Resuming connection for reason: "+e),delete this.interruptReasons_[e],_.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=pn,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return z(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new oe(e).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===_.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},t.prototype.onAuthRevoked_=function(e,t){A("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||++this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e=this;this.tryAuth(),_.forEach(this.listens_,function(t,n){_.forEach(n,function(t,n){e.sendListen_(n)})});for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";_.CONSTANTS.NODE_ADMIN?t="admin_node":_.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+b.SDK_VERSION.replace(/\./g,"-")]=1,_.isMobileCordova()?e["framework.cordova"]=1:_.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=en.getInstance().currentlyOnline();return _.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(hn),yn=function(e){function t(t,n,r){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.log_=D("p:rest:"),o.listens_={},o}return m.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(_.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,o){var i=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var l=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(e,t){var n=t;if(404===e&&(n=null,e=null),null===e&&i.onDataUpdate_(a,n,!1,r),_.safeGet(i.listens_,s)===u){var l;l=e?401==e?"permission_denied":"rest_error:"+e:"ok",o(l,null)}})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(o){var i=o&&o.accessToken;i&&(t.auth=i);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?"+_.querystring(t);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var e=null;if(s.status>=200&&s.status<300){try{e=_.jsonEval(s.responseText)}catch(e){M("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&M("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()})},t}(hn),vn=function(){function e(e,t,n){var r=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ht,this.persistentConnection_=null;var o=new Vt(n);if(this.stats_=Qt.getCollection(e),t||ne())this.server_=new yn(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var i=n.options.databaseAuthVariableOverride;if("undefined"!==typeof i&&null!==i){if("object"!==typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_.stringify(i)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new dn(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,i),this.server_=this.persistentConnection_}o.addTokenChangeListener(function(e){r.server_.refreshAuthToken(e)}),this.statsReporter_=Qt.getOrCreateReporter(e,function(){return new Yt(r.stats_,r.server_)}),this.transactions_init_(),this.infoData_=new Ht,this.infoSyncTree_=new Bt({startListening:function(e,t,n,o){var i=[],a=r.infoData_.getNode(e.path);return a.isEmpty()||(i=r.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout(function(){o("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Bt({startListening:function(e,t,n,o){return r.server_.listen(e,n,t,function(t,n){var i=o(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,i)}),[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new oe(".info/serverTimeOffset")),t=e.val()||0;return(new Date).getTime()+t},e.prototype.generateServerValues=function(){return pt({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var o=new oe(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var i=[];if(r)if(n){var a=_.map(t,function(e){return u(e)});i=this.serverSyncTree_.applyTaggedQueryMerge(o,a,r)}else{var s=u(t);i=this.serverSyncTree_.applyTaggedQueryOverwrite(o,s,r)}else if(n){var l=_.map(t,function(e){return u(e)});i=this.serverSyncTree_.applyServerMerge(o,l)}else{var c=u(t);i=this.serverSyncTree_.applyServerOverwrite(o,c)}var h=o;i.length>0&&(h=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(h,i)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;G(e,function(e,n){t.updateInfo_(n,e)})},e.prototype.updateInfo_=function(e,t){var n=new oe("/.info/"+e),r=u(t);this.infoData_.updateSnapshot(n,r);var o=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,o)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var o=this;this.log_("set",{path:e.toString(),value:t,priority:n});var i=this.generateServerValues(),a=u(t,n),s=yt(a,i),l=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,s,l,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),a.val(!0),function(t,n){var i="ok"===t;i||M("set at "+e+" failed: "+t);var a=o.serverSyncTree_.ackUserWrite(l,!i);o.eventQueue_.raiseEventsForChangedPath(e,a),o.callOnCompleteCallback(r,t,n)});var h=this.abortTransactions_(e);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var o=!0,i=this.generateServerValues(),a={};if(_.forEach(t,function(e,t){o=!1;var n=u(t);a[e]=yt(n,i)}),o)A("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserMerge(e,a,s);this.eventQueue_.queueEvents(l),this.server_.merge(e.toString(),t,function(t,o){var i="ok"===t;i||M("update at "+e+" failed: "+t);var a=r.serverSyncTree_.ackUserWrite(s,!i),u=a.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,t,o)}),_.forEach(t,function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=dt(this.onDisconnect_,t),r=[];n.forEachTree(oe.Empty,function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var o=e.abortTransactions_(t);e.rerunTransactions_(o)}),this.onDisconnect_=new ht,this.eventQueue_.raiseEventsForChangedPath(oe.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,o){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,o)})},e.prototype.onDisconnectSet=function(e,t,n){var r=this,o=u(t);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,i){"ok"===t&&r.onDisconnect_.remember(e,o),r.callOnCompleteCallback(n,t,i)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var o=this,i=u(t,n);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,n){"ok"===t&&o.onDisconnect_.remember(e,i),o.callOnCompleteCallback(r,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(_.isEmpty(t))return A("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,function(o,i){"ok"===o&&_.forEach(t,function(t,n){var o=u(n);r.onDisconnect_.remember(e.child(t),o)}),r.callOnCompleteCallback(n,o,i)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var t;e?(this.statsListener_||(this.statsListener_=new zt(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);_.forEach(t,function(e,t){for(var r=e.length;r<n+2;r++)e+=" ";console.log(e+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),A.apply(void 0,[n].concat(e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&te(function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),o=r;n&&(o+=": "+n);var i=new Error(o);i.code=r,e(i)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new kn(this))},enumerable:!0,configurable:!0}),e}(),_n=function(){function e(t){this.indexedFilter_=new Rt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,o,i){return this.matches(new Oe(t,n))||(n=Ye.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,o,i)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Ye.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Ye.EMPTY_NODE);var o=this;return t.forEachChild(je,function(e,t){o.matches(new Oe(e,t))||(r=r.updateImmediateChild(e,Ye.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),gn=function(){function e(e){this.rangedFilter_=new _n(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,o,i){return this.rangedFilter_.matches(new Oe(t,n))||(n=Ye.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,o,i):this.fullLimitUpdateChild_(e,t,n,o,i)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Ye.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=Ye.EMPTY_NODE.withIndex(this.index_);var o=void 0;o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var i=0;o.hasNext()&&i<this.limit_;){var a=o.getNext(),s=void 0;if(!(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),i++}}else{r=t.withIndex(this.index_),r=r.updatePriority(Ye.EMPTY_NODE);var u=void 0,l=void 0,c=void 0,o=void 0;if(this.reverse_){o=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else o=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var i=0,p=!1;o.hasNext();){var a=o.getNext();!p&&c(u,a)<=0&&(p=!0);var s=p&&i<this.limit_&&c(a,l)<=0;s?i++:r=r.updateImmediateChild(a.name,Ye.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,o){var i;if(this.reverse_){var a=this.index_.getCompare();i=function(e,t){return a(t,e)}}else i=this.index_.getCompare();var s=e;_.assert(s.numChildren()==this.limit_,"");var u=new Oe(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name==t||s.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var f=null==p?1:i(p,u);if(c&&!n.isEmpty()&&f>=0)return null!=o&&o.trackChildChange(Nt.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=o&&o.trackChildChange(Nt.childRemovedChange(t,h));var d=s.updateImmediateChild(t,Ye.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=o&&o.trackChildChange(Nt.childAddedChange(p.name,p.node)),d.updateImmediateChild(p.name,p.node)):d}return n.isEmpty()?e:c&&i(l,u)>=0?(null!=o&&(o.trackChildChange(Nt.childRemovedChange(l.name,l.node)),o.trackChildChange(Nt.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Ye.EMPTY_NODE)):e},e}(),mn=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=je}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return _.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return _.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:B},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return _.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return _.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:H},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return _.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==je&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==je},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new Rt(this.getIndex()):this.hasLimit()?new gn(this):new _n(this)},e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===je?r=t.PRIORITY_INDEX:this.index_===nt?r=t.VALUE_INDEX:this.index_===De?r=t.KEY_INDEX:(_.assert(this.index_ instanceof rt,"Unrecognized index type!"),r=this.index_.toString()),n[t.ORDER_BY]=_.stringify(r),this.startSet_&&(n[t.START_AT]=_.stringify(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+_.stringify(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=_.stringify(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+_.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_),n},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),bn=function(e){function t(t,n){if(!(t instanceof vn))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,mn.DEFAULT,!1)||this}return m.__extends(t,e),t.prototype.getKey=function(){return _.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return _.validateArgCount("Reference.child",1,1,arguments.length),"number"===typeof e?e=String(e):e instanceof oe||(null===this.path.getFront()?Te("Reference.child",1,e,!1):we("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){_.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){_.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){_.validateArgCount("Reference.set",1,2,arguments.length),Se("Reference.set",this.path),ve("Reference.set",1,e,this.path,!1),_.validateCallback("Reference.set",2,t,!0);var n=new _.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(_.validateArgCount("Reference.update",1,2,arguments.length),Se("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,M("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}me("Reference.update",1,e,this.path,!1),_.validateCallback("Reference.update",2,t,!0);var o=new _.Deferred;return this.repo.update(this.path,e,o.wrapCallback(t)),o.promise},t.prototype.setWithPriority=function(e,t,n){if(_.validateArgCount("Reference.setWithPriority",2,3,arguments.length),Se("Reference.setWithPriority",this.path),ve("Reference.setWithPriority",1,e,this.path,!1),be("Reference.setWithPriority",2,t,!1),_.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new _.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return _.validateArgCount("Reference.remove",0,1,arguments.length),Se("Reference.remove",this.path),_.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(_.validateArgCount("Reference.transaction",1,3,arguments.length),Se("Reference.transaction",this.path),_.validateCallback("Reference.transaction",1,e,!1),_.validateCallback("Reference.transaction",2,t,!0),Ne("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new _.Deferred;"function"===typeof t&&r.promise.catch(function(){});var o=function(e,n,o){e?r.reject(e):r.resolve(new Pe(n,o)),"function"===typeof t&&t(e,n,o)};return this.repo.startTransaction(this.path,e,o,n),r.promise},t.prototype.setPriority=function(e,t){_.validateArgCount("Reference.setPriority",1,2,arguments.length),Se("Reference.setPriority",this.path),be("Reference.setPriority",1,e,!1),_.validateCallback("Reference.setPriority",2,t,!0);var n=new _.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){_.validateArgCount("Reference.push",0,2,arguments.length),Se("Reference.push",this.path),ve("Reference.push",1,e,this.path,!0),_.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),o=xe(r),i=this.child(o),a=this.child(o);return n=null!=e?i.set(e,t).then(function(){return a}):Promise.resolve(a),i.then=n.then.bind(n),i.catch=n.then.bind(n,void 0),"function"===typeof t&&n.catch(function(){}),i},t.prototype.onDisconnect=function(){return Se("Reference.onDisconnect",this.path),new Re(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(lt);lt.__referenceConstructor=bn,Mt.__referenceConstructor=bn;var Cn,En=function(){function e(){this.children={},this.childCount=0,this.value=null}return e}(),wn=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new En),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof oe?t:new oe(t),o=this;null!==(n=r.getFront());){o=new e(n,o,_.safeGet(o.node_.children,n)||new En),r=r.popFront()}return o},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){_.assert("undefined"!==typeof e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;_.forEach(this.node_.children,function(r,o){t(new e(r,n,o))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new oe(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=_.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(Cn||(Cn={})),vn.MAX_TRANSACTION_RETRIES_=25,vn.prototype.transactions_init_=function(){this.transactionQueueTree_=new wn},vn.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var o=function(){},i=new bn(this,e);i.on("value",o);var a=function(){i.off("value",o)},s={path:e,update:t,onComplete:n,status:null,order:N(),applyLocally:r,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=this.getLatestState_(e);s.currentInputSnapshot=l;var c=s.update(l.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var h=new ot(s.currentInputSnapshot,new bn(this,s.path),je);s.onComplete(null,!1,h)}}else{_e("transaction failed: Data returned ",c,s.path),s.status=Cn.RUN;var p=this.transactionQueueTree_.subTree(e),f=p.getValue()||[];f.push(s),p.setValue(f);var d=void 0;if("object"===typeof c&&null!==c&&_.contains(c,".priority"))d=_.safeGet(c,".priority"),_.assert(ye(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{d=(this.serverSyncTree_.calcCompleteEventCache(e)||Ye.EMPTY_NODE).getPriority().val()}d=d;var y=this.generateServerValues(),v=u(c,d),g=yt(v,y);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(e,g,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,m),this.sendReadyTransactions_()}},vn.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||Ye.EMPTY_NODE},vn.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);_.assert(n.length>0,"Sending zero length transaction queue");n.every(function(e){return e.status===Cn.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},vn.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map(function(e){return e.currentWriteId}),o=this.getLatestState_(e,r),i=o,a=o.hash(),s=0;s<t.length;s++){var u=t[s];_.assert(u.status===Cn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Cn.SENT,u.retryCount++;var l=oe.relativePath(e,u.path);i=i.updateChild(l,u.currentOutputSnapshotRaw)}var c=i.val(!0),h=e;this.server_.put(h.toString(),c,function(r){n.log_("transaction put response",{path:h.toString(),status:r});var o=[];if("ok"===r){for(var i=[],a=0;a<t.length;a++){if(t[a].status=Cn.COMPLETED,o=o.concat(n.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var s=t[a].currentOutputSnapshotResolved,u=new bn(n,t[a].path),l=new ot(s,u,je);i.push(t[a].onComplete.bind(null,null,!0,l))}t[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,o);for(var a=0;a<i.length;a++)te(i[a])}else{if("datastale"===r)for(var a=0;a<t.length;a++)t[a].status===Cn.SENT_NEEDS_ABORT?t[a].status=Cn.NEEDS_ABORT:t[a].status=Cn.RUN;else{M("transaction at "+h.toString()+" failed: "+r);for(var a=0;a<t.length;a++)t[a].status=Cn.NEEDS_ABORT,t[a].abortReason=r}n.rerunTransactions_(e)}},a)},vn.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},vn.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],r=[],o=e.filter(function(e){return e.status===Cn.RUN}),i=o.map(function(e){return e.currentWriteId}),a=0;a<e.length;a++){var s=e[a],l=oe.relativePath(t,s.path),c=!1,h=void 0;if(_.assert(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===Cn.NEEDS_ABORT)c=!0,h=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===Cn.RUN)if(s.retryCount>=vn.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var p=this.getLatestState_(s.path,i);s.currentInputSnapshot=p;var f=e[a].update(p.val());if(void 0!==f){_e("transaction failed: Data returned ",f,s.path);var d=u(f),y="object"===typeof f&&null!=f&&_.contains(f,".priority");y||(d=d.updatePriority(p.getPriority()));var v=s.currentWriteId,g=this.generateServerValues(),m=yt(d,g);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(v),1),r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,m,s.currentWriteId,s.applyLocally)),r=r.concat(this.serverSyncTree_.ackUserWrite(v,!0))}else c=!0,h="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],c&&(e[a].status=Cn.COMPLETED,function(e){setTimeout(e,Math.floor(0))}(e[a].unwatcher),e[a].onComplete))if("nodata"===h){var b=new bn(this,e[a].path),C=e[a].currentInputSnapshot,E=new ot(C,b,je);n.push(e[a].onComplete.bind(null,null,!1,E))}else n.push(e[a].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var a=0;a<n.length;a++)te(n[a]);this.sendReadyTransactions_()}},vn.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},vn.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},vn.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var o=0;o<r.length;o++)t.push(r[o]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},vn.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,o=0;o<n.length;o++)n[o].status!==Cn.COMPLETED&&(n[r]=n[o],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},vn.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},vn.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],o=-1,i=0;i<t.length;i++)if(t[i].status===Cn.SENT_NEEDS_ABORT);else if(t[i].status===Cn.SENT)_.assert(o===i-1,"All SENT items should be at beginning of queue."),o=i,t[i].status=Cn.SENT_NEEDS_ABORT,t[i].abortReason="set";else if(_.assert(t[i].status===Cn.RUN,"Unexpected transaction status in abort"),t[i].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[i].currentWriteId,!0)),t[i].onComplete){n.push(t[i].onComplete.bind(null,new Error("set"),!1,null))}-1===o?e.setValue(null):t.length=o+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r);for(var i=0;i<n.length;i++)te(n[i])}};var Tn,Sn=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return Tn||(Tn=new e),Tn},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&L("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=ue(n),o=r.repoInfo;return ke("Invalid Firebase Database URL",1,r),r.path.isEmpty()||L("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,e).database},e.prototype.deleteRepo=function(e){var t=_.safeGet(this.repos_,e.app.name);t&&_.safeGet(t,e.repoInfo_.toURLString())===e||L("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=_.safeGet(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var r=_.safeGet(n,e.toURLString());return r&&L("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new vn(e,this.useRestClient_,t),n[e.toURLString()]=r,r},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),kn=function(){function e(e){this.repo_=e,e instanceof vn||L("Don't call new Database() directly - please use firebase.database()."),this.root_=new bn(e,oe.Empty),this.INTERNAL=new Nn(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),_.validateArgCount("database.ref",0,1,arguments.length),e instanceof bn?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),_.validateArgCount(t,1,1,arguments.length);var n=ue(e);ke(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&L(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&L("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){_.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){_.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}(),Nn=function(){function e(e){this.database=e}return e.prototype.delete=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return this.database.checkDeleted_("delete"),Sn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},e}(),Rn=function(){un.forceDisallow(),on.forceAllow()},Pn=function(){on.forceDisallow()},xn=function(){return un.isAvailable()},On=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},In=function(e,t){e.repo.stats(t)},An=function(e,t){e.repo.statsIncrementCounter(t)},Dn=function(e){return e.repo.dataUpdateCount},Fn=function(e,t){return e.repo.interceptServerData_(t)},Ln=Object.freeze({forceLongPolling:Rn,forceWebSockets:Pn,isWebSocketsAvailable:xn,setSecurityDebugCallback:On,stats:In,statsIncrementCounter:An,dataUpdateCount:Dn,interceptServerData:Fn}),Mn=dn;dn.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},dn.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Un=cn,jn=function(e){var t=dn.prototype.put;return dn.prototype.put=function(n,r,o,i){void 0!==i&&(i=e()),t.call(this,n,r,o,i)},function(){dn.prototype.put=t}},Wn=se,Bn=function(e){return e.queryIdentifier()},Hn=function(e){return e.repo.persistentConnection_.listens_},Vn=function(e){Sn.getInstance().forceRestClient(e)},qn=Object.freeze({DataConnection:Mn,RealTimeConnection:Un,hijackHash:jn,ConnectionTarget:Wn,queryIdentifier:Bn,listens:Hn,forceRestClient:Vn}),Qn=kn.ServerValue;l(b),t.registerDatabase=l,t.Database=kn,t.Query=lt,t.Reference=bn,t.enableLogging=I,t.ServerValue=Qn,t.DataSnapshot=ot,t.OnDisconnect=Re}).call(t,n(8))},function(e,t,n){"use strict";function r(e){i.forEach(function(t){t.logLevel=e})}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"setLogLevel",function(){return r}),n.d(t,"Logger",function(){return u}),n.d(t,"LogLevel",function(){return o});var o,i=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var a=o.INFO,s=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case o.DEBUG:case o.VERBOSE:console.log.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.INFO:console.info.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.WARN:console.warn.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;case o.ERROR:console.error.apply(console,["["+i+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,i.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,o.ERROR].concat(e))},e}()},function(e,t,n){"use strict";n(41)},function(e,t,n){"use strict";function r(e){return"storage/"+e}function o(){return new rt(ot.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function i(e){return new rt(ot.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function a(e){return new rt(ot.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function s(){return new rt(ot.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function u(e){return new rt(ot.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function l(){return new rt(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c(){return new rt(ot.CANCELED,"User canceled the upload/download.")}function h(e){return new rt(ot.INVALID_URL,"Invalid URL '"+e+"'.")}function p(e){return new rt(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function f(){return new rt(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d(){return new rt(ot.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function y(){return new rt(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v(e,t,n){return new rt(ot.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function _(e,t,n,r){var o,i;return e===t?(o=e,i=1===e?"argument":"arguments"):(o="between "+e+" and "+t,i="arguments"),new rt(ot.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+o+" "+i+", received "+r+".")}function g(){return new rt(ot.APP_DELETED,"The Firebase app was deleted.")}function m(e){return new rt(ot.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function b(e,t){return new rt(ot.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function C(e){throw new rt(ot.INTERNAL_ERROR,"Internal error: "+e)}function E(e){switch(e){case it.RAW:case it.BASE64:case it.BASE64URL:case it.DATA_URL:return;default:throw"Expected one of the event types: ["+it.RAW+", "+it.BASE64+", "+it.BASE64URL+", "+it.DATA_URL+"]."}}function w(e,t){switch(e){case it.RAW:return new at(T(t));case it.BASE64:case it.BASE64URL:return new at(k(e,t));case it.DATA_URL:return new at(N(t),R(t))}throw o()}function T(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r)){var o=n<e.length-1&&56320==(64512&e.charCodeAt(n+1));if(o){var i=r,a=e.charCodeAt(++n);r=65536|(1023&i)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function S(e){var t;try{t=decodeURIComponent(e)}catch(e){throw b(it.DATA_URL,"Malformed data URL.")}return T(t)}function k(e,t){switch(e){case it.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var o=n?"-":"_";throw b(e,"Invalid character '"+o+"' found: is it base64url encoded?")}break;case it.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a){var o=i?"+":"/";throw b(e,"Invalid character '"+o+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw b(e,"Invalid character found")}for(var u=new Uint8Array(s.length),l=0;l<s.length;l++)u[l]=s.charCodeAt(l);return u}function N(e){var t=new st(e);return t.base64?k(it.BASE64,t.rest):S(t.rest)}function R(e){return new st(e).contentType}function P(e,t){return!!(e.length>=t.length)&&e.substring(e.length-t.length)===t}function x(e){switch(e){case lt.RUNNING:case lt.PAUSING:case lt.CANCELING:return ct.RUNNING;case lt.PAUSED:return ct.PAUSED;case lt.SUCCESS:return ct.SUCCESS;case lt.CANCELED:return ct.CANCELED;case lt.ERROR:default:return ct.ERROR}}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function I(e,t){for(var n in e)O(e,n)&&t(n,e[n])}function A(e){if(null==e)return{};var t={};return I(e,function(e,n){t[e]=n}),t}function D(e){return new Promise(e)}function F(e){return Promise.resolve(e)}function L(e){return Promise.reject(e)}function M(e){return null!=e}function U(e){return void 0!==e}function j(e){return"function"===typeof e}function W(e){return"object"===typeof e}function B(e){return W(e)&&null!==e}function H(e){return W(e)&&!Array.isArray(e)}function V(e){return"string"===typeof e||e instanceof String}function q(e){return"number"===typeof e||e instanceof Number}function Q(e){return z()&&e instanceof Blob}function z(){return"undefined"!==typeof Blob}function K(e){var t;try{t=JSON.parse(e)}catch(e){return null}return H(t)?t:null}function G(e){if(0==e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}function Y(e,t){var n=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?n:e+"/"+n}function X(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function $(e){return Xe+Je+e}function J(e){return $e+Je+e}function Z(e){return Xe+Ze+e}function ee(e){var t=encodeURIComponent,n="?";return I(e,function(e,r){var o=t(e)+"="+t(r);n=n+o+"&"}),n=n.slice(0,-1)}function te(e,t){return t}function ne(e){return!V(e)||e.length<2?e:(e=e,X(e))}function re(){function e(e,t){return ne(t)}function t(e,t){return M(t)?+t:t}if(yt)return yt;var n=[];n.push(new dt("bucket")),n.push(new dt("generation")),n.push(new dt("metageneration")),n.push(new dt("name","fullPath",!0));var r=new dt("name");r.xform=e,n.push(r);var o=new dt("size");return o.xform=t,n.push(o),n.push(new dt("timeCreated")),n.push(new dt("updated")),n.push(new dt("md5Hash",null,!0)),n.push(new dt("cacheControl",null,!0)),n.push(new dt("contentDisposition",null,!0)),n.push(new dt("contentEncoding",null,!0)),n.push(new dt("contentLanguage",null,!0)),n.push(new dt("contentType",null,!0)),n.push(new dt("metadata","customMetadata",!0)),yt=n}function oe(e,t){function n(){var n=e.bucket,r=e.fullPath,o=new ft(n,r);return t.makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function ie(e,t,n){var r={};r.type="file";for(var o=n.length,i=0;i<o;i++){var a=n[i];r[a.local]=a.xform(r,t[a.server])}return oe(r,e),r}function ae(e,t,n){var r=K(t);return null===r?null:ie(e,r,n)}function se(e,t){var n=K(t);if(null===n)return null;if(!V(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var o=encodeURIComponent;return r.split(",").map(function(t){var n=e.bucket,r=e.fullPath;return J("/b/"+o(n)+"/o/"+o(r))+ee({alt:"media",token:t})})[0]}function ue(e,t){for(var n={},r=t.length,o=0;o<r;o++){var i=t[o];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}function le(e){if(!e||!W(e))throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if(!W(n))throw"Expected object for 'customMetadata' mapping."}else if(B(n))throw"Mapping for '"+t+"' cannot be an object."}}function ce(e,t,n){for(var r=t.length,o=t.length,i=0;i<t.length;i++)if(t[i].optional){r=i;break}if(!(r<=n.length&&n.length<=o))throw _(r,o,e,n.length);for(var i=0;i<n.length;i++)try{t[i].validator(n[i])}catch(t){throw t instanceof Error?v(i,e,t.message):v(i,e,t)}}function he(e,t){return function(n){e(n),t(n)}}function pe(e,t){function n(e){if(!V(e))throw"Expected string."}var r;return r=e?he(n,e):n,new vt(r,t)}function fe(){function e(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||z()&&e instanceof Blob))throw"Expected Blob or File."}return new vt(e)}function de(e){return new vt(le,e)}function ye(){function e(e){if(!(q(e)&&e>=0))throw"Expected a number 0 or greater."}return new vt(e)}function ve(e,t){function n(t){if(!(null===t||M(t)&&t instanceof Object))throw"Expected an Object.";void 0!==e&&null!==e&&e(t)}return new vt(n,t)}function _e(e){function t(e){if(null!==e&&!j(e))throw"Expected a Function."}return new vt(t,e)}function ge(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ge();if(void 0!==n){for(var r=new n,o=0;o<e.length;o++)r.append(e[o]);return r.getBlob()}if(z())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}function be(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function Ce(e,t){return-1!==e.indexOf(t)}function Ee(e){return Array.prototype.slice.call(e)}function we(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}function Te(e){if(!e)throw o()}function Se(e,t){function n(n,r){var o=ae(e,r,t);return Te(null!==o),o}return n}function ke(e,t){function n(n,r){var o=ae(e,r,t);return Te(null!==o),se(o,r)}return n}function Ne(e){function t(t,n){var r;return r=401===t.getStatus()?s():402===t.getStatus()?a(e.bucket):403===t.getStatus()?u(e.path):n,r.setServerResponseProp(n.serverResponseProp()),r}return t}function Re(e){function t(t,r){var o=n(t,r);return 404===t.getStatus()&&(o=i(e.path)),o.setServerResponseProp(r.serverResponseProp()),o}var n=Ne(e);return t}function Pe(e,t,n){var r=t.fullServerUrl(),o=$(r),i=e.maxOperationRetryTime(),a=new gt(o,"GET",Se(e,n),i);return a.errorHandler=Re(t),a}function xe(e,t,n){var r=t.fullServerUrl(),o=$(r),i=e.maxOperationRetryTime(),a=new gt(o,"GET",ke(e,n),i);return a.errorHandler=Re(t),a}function Oe(e,t,n,r){var o=t.fullServerUrl(),i=$(o),a=ue(n,r),s={"Content-Type":"application/json; charset=utf-8"},u=e.maxOperationRetryTime(),l=new gt(i,"PATCH",Se(e,r),u);return l.headers=s,l.body=a,l.errorHandler=Re(t),l}function Ie(e,t){function n(e,t){}var r=t.fullServerUrl(),o=$(r),i=e.maxOperationRetryTime(),a=new gt(o,"DELETE",n,i);return a.successCodes=[200,204],a.errorHandler=Re(t),a}function Ae(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function De(e,t,n){var r=A(n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Ae(null,t)),r}function Fe(e,t,n,r,o){var i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=De(t,r,o),l=ue(u,n),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+s+"--",p=_t.getBlob(c,r,h);if(null===p)throw f();var d={name:u.fullPath},y=Z(i),v=e.maxUploadRetryTime(),_=new gt(y,"POST",Se(e,n),v);return _.urlParams=d,_.headers=a,_.body=p.uploadData(),_.errorHandler=Ne(t),_}function Le(e,t){var n;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){Te(!1)}return Te(Ce(t||["active"],n)),n}function Me(e,t,n,r,o){function i(e,t){Le(e);var n;try{n=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){Te(!1)}return Te(V(n)),n}var a=t.bucketOnlyServerUrl(),s=De(t,r,o),u={name:s.fullPath},l=Z(a),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=ue(s,n),p=e.maxUploadRetryTime(),f=new gt(l,"POST",i,p);return f.urlParams=u,f.headers=c,f.body=h,f.errorHandler=Ne(t),f}function Ue(e,t,n,r){function o(e,t){var n,o=Le(e,["active","final"]);try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){Te(!1)}var i=parseInt(n,10);return Te(!isNaN(i)),new mt(i,r.size(),"final"===o)}var i={"X-Goog-Upload-Command":"query"},a=e.maxUploadRetryTime(),s=new gt(n,"POST",o,a);return s.headers=i,s.errorHandler=Ne(t),s}function je(e,t,n,r,o,i,a,s){function u(e,n){var o,a=Le(e,["active","final"]),s=l.current+h,u=r.size();return o="final"===a?Se(t,i)(e,n):null,new mt(s,u,"final"===a,o)}var l=new mt(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw d();var c=l.total-l.current,h=c;o>0&&(h=Math.min(h,o));var p=l.current,y=p+h,v=h===c?"upload, finalize":"upload",_={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":l.current},g=r.slice(p,y);if(null===g)throw f();var m=t.maxUploadRetryTime(),b=new gt(n,"POST",u,m);return b.headers=_,b.body=g.uploadData(),b.progressCallback=s||null,b.errorHandler=Ne(e),b}function We(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];F(!0).then(function(){e.apply(null,t)})}}function Be(e,t,n){function r(){return 2===h}function o(){p||(p=!0,t.apply(null,arguments))}function i(t){l=setTimeout(function(){l=null,e(a,r())},t)}function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!p){if(e)return void o.apply(null,arguments);if(r()||c)return void o.apply(null,arguments);u<64&&(u*=2);var a;1===h?(h=2,a=0):a=1e3*(u+Math.random()),i(a)}}function s(e){f||(f=!0,p||(null!==l?(e||(h=2),clearTimeout(l),i(0)):e||(h=1)))}var u=1,l=null,c=!1,h=0,p=!1,f=!1;return i(0),setTimeout(function(){c=!0,s(!0)},n),s}function He(e){e(!1)}function Ve(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function qe(e){var t="undefined"!==typeof Ye.a?Ye.a.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}function Qe(e,t,n){var r=ee(e.urlParams),o=e.url+r,i=A(e.headers);return Ve(i,t),qe(i),new Nt(o,e.method,i,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}function ze(e,t,n){return new Pt(e,new pt,n)}var Ke,Ge=n(4),Ye=n.n(Ge),Xe="https://firebasestorage.googleapis.com",$e="https://firebasestorage.googleapis.com",Je="/v0",Ze="/v0",et=12e4,tt=6e4,nt=-9007199254740991,rt=function(){function e(e,t){this.code_=r(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return r(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),ot={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"},it={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},at=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}(),st=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw b(it.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=P(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}(),ut={STATE_CHANGED:"state_changed"},lt={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},ct={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Ke||(Ke={}));var ht=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ke.NO_ERROR,this.sendPromise_=D(function(t,n){e.xhr_.addEventListener("abort",function(n){e.errorCode_=Ke.ABORT,t(e)}),e.xhr_.addEventListener("error",function(n){e.errorCode_=Ke.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(n){t(e)})})}return e.prototype.send=function(e,t,n,r){var o=this;if(this.sent_)throw C("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),M(r)){I(r,function(e,t){o.xhr_.setRequestHeader(e,t.toString())})}return M(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw C("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw C("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw C("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){M(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){M(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),pt=function(){function e(){}return e.prototype.createXhrIo=function(){return new ht},e}(),ft=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===n.path)return n;throw p(t)},e.makeFromUrl=function(t){function n(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}function r(e){e.path_=decodeURIComponent(e.path)}for(var o=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),a={bucket:1,path:3},s=new RegExp("^https?://firebasestorage\\.googleapis\\.com/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),u={bucket:1,path:3},l=[{regex:i,indices:a,postModify:n},{regex:s,indices:u,postModify:r}],c=0;c<l.length;c++){var p=l[c],f=p.regex.exec(t);if(f){var d=f[p.indices.bucket],y=f[p.indices.path];y||(y=""),o=new e(d,y),p.postModify(o);break}}if(null==o)throw h(t);return o},e}(),dt=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||te}return e}(),yt=null,vt=function(){function e(e,t){var n=this;this.validator=function(t){n.optional&&!U(t)||e(t)},this.optional=!!t}return e}(),_t=function(){function e(e,t){var n=0,r="";Q(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Q(this.data_)){var r=this.data_,o=be(r,t,n);return null===o?null:new e(o)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(z()){var r=t.map(function(t){return t instanceof e?t.data_:t});return new e(me.apply(null,r))}var o=t.map(function(e){return V(e)?w(it.RAW,e).data:e.data_}),i=0;o.forEach(function(e){i+=e.byteLength});var a=new Uint8Array(i),s=0;return o.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}(),gt=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}(),mt=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}(),bt=function(){function e(e,t,n){if(j(e)||M(t)||M(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}return e}(),Ct=function(){function e(e,t,n,r,o,i){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=o,this.ref=i}return e}(),Et=function(){function e(e,t,n,r,o,i){void 0===i&&(i=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=o,this.metadata_=i,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=lt.RUNNING,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(ot.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(lt.ERROR))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(ot.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(lt.ERROR))},this.promise_=D(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n,r){e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===lt.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(n){switch(t.state_){case lt.RUNNING:e(n);break;case lt.CANCELING:t.transition_(lt.CANCELED);break;case lt.PAUSING:t.transition_(lt.PAUSED)}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var n=Me(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(n){var r=Ue(e.authWrapper_,e.location_,t,e.blob_),o=e.authWrapper_.makeRequest(r,n);e.request_=o,o.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new mt(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_(function(o){var i;try{i=je(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(t){return e.error_=t,void e.transition_(lt.ERROR)}var a=e.authWrapper_.makeRequest(i,o);e.request_=a,a.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(lt.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var n=Pe(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(lt.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var n=Fe(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(lt.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case lt.CANCELING:case lt.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case lt.RUNNING:var t=this.state_===lt.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case lt.PAUSED:this.state_=e,this.notifyObservers_();break;case lt.CANCELED:this.error_=c(),this.state_=e,this.notifyObservers_();break;case lt.ERROR:case lt.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case lt.PAUSING:this.transition_(lt.PAUSED);break;case lt.CANCELING:this.transition_(lt.CANCELED);break;case lt.RUNNING:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=x(this.state_);return new Ct(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function o(t){if(e!==ut.STATE_CHANGED)throw"Expected one of the event types: ["+ut.STATE_CHANGED+"]."}function i(e){try{return void l(e)}catch(e){}try{c(e);if(!(U(e.next)||U(e.error)||U(e.complete)))throw"";return}catch(e){throw u}}function a(e){function t(t,n,o){null!==e&&ce("on",e,arguments);var i=new bt(t,n,r);return h.addObserver_(i),function(){h.removeObserver_(i)}}return t}function s(e){if(null===e)throw u;i(e)}void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var u="Expected a function or an Object with one of `next`, `error`, `complete` properties.",l=_e(!0).validator,c=ve(null,!0).validator;ce("on",[pe(o),ve(i,!0),_e(!0),_e(!0)],arguments);var h=this,p=[ve(s),_e(!0),_e(!0)];return U(t)||U(n)||U(r)?a(null)(t,n,r):a(p)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){we(this.observers_,e)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),Ee(this.observers_).forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(x(this.state_)){case ct.SUCCESS:We(this.resolve_.bind(null,this.snapshot))();break;case ct.CANCELED:case ct.ERROR:We(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(x(this.state_)){case ct.RUNNING:case ct.PAUSED:null!==e.next&&We(e.next.bind(e,this.snapshot))();break;case ct.SUCCESS:null!==e.complete&&We(e.complete.bind(e))();break;case ct.CANCELED:case ct.ERROR:null!==e.error&&We(e.error.bind(e,this.error_))();break;default:null!==e.error&&We(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){ce("resume",[],arguments);var e=this.state_===lt.PAUSED||this.state_===lt.PAUSING;return e&&this.transition_(lt.RUNNING),e},e.prototype.pause=function(){ce("pause",[],arguments);var e=this.state_===lt.RUNNING;return e&&this.transition_(lt.PAUSING),e},e.prototype.cancel=function(){ce("cancel",[],arguments);var e=this.state_===lt.RUNNING||this.state_===lt.PAUSING;return e&&this.transition_(lt.CANCELING),e},e}(),wt=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof ft?t:ft.makeFromUrl(t)}return e.prototype.toString=function(){return ce("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return re()},e.prototype.child=function(e){ce("child",[pe()],arguments);var t=Y(this.location.path,e),n=new ft(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=G(this.location.path);if(null===e)return null;var t=new ft(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new ft(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return X(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),ce("put",[fe(),de(!0)],arguments),this.throwIfRoot_("put"),new Et(this,this.authWrapper,this.location,this.mappings(),new _t(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=it.RAW),ce("putString",[pe(),pe(E,!0),de(!0)],arguments),this.throwIfRoot_("putString");var r=w(t,e),o=A(n);return!M(o.contentType)&&M(r.contentType)&&(o.contentType=r.contentType),new Et(this,this.authWrapper,this.location,this.mappings(),new _t(r.data,!0),o)},e.prototype.delete=function(){ce("delete",[],arguments),this.throwIfRoot_("delete");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=Ie(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.getMetadata=function(){ce("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=Pe(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()})},e.prototype.updateMetadata=function(e){ce("updateMetadata",[de()],arguments),this.throwIfRoot_("updateMetadata");var t=this;return this.authWrapper.getAuthToken().then(function(n){var r=Oe(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()})},e.prototype.getDownloadURL=function(){ce("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var e=this;return this.authWrapper.getAuthToken().then(function(t){var n=xe(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then(function(e){if(null===e)throw y();return e})})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw m(e)},e}(),Tt=function(){function e(e){this.promise_=L(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}(),St=function(){function e(){this.map_={},this.id_=nt}return e.prototype.addRequest=function(e){function t(){delete r.map_[n]}var n=this.id_;this.id_++,this.map_[n]=e;var r=this;e.getPromise().then(t,t)},e.prototype.clear=function(){I(this.map_,function(e,t){t&&t.cancel(!0)}),this.map_={}},e}(),kt=function(){function e(t,n,r,o,i){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;M(a)&&(this.bucket_=e.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=i,this.service_=o,this.maxOperationRetryTime_=et,this.maxUploadRetryTime_=tt,this.requestMap_=new St}return e.extractBucket_=function(e){var t=e.storageBucket||null;return null==t?null:ft.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&M(this.app_.INTERNAL)&&M(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then(function(e){return null!==e?e.accessToken:null},function(e){return null}):F(null)},e.prototype.bucket=function(){if(this.deleted_)throw g();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new Tt(g());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),Nt=function(){function e(e,t,n,r,o,i,a,s,u,l,c){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=o.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=u,this.pool_=c;var h=this;this.promise_=D(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}return e.prototype.start_=function(){function e(e,t){function r(e){var t=e.loaded,r=e.lengthComputable?e.total:-1;null!==n.progressCallback_&&n.progressCallback_(t,r)}if(t)return void e(!1,new Rt(!1,null,!0));var o=n.pool_.createXhrIo();n.pendingXhr_=o,null!==n.progressCallback_&&o.addUploadProgressListener(r),o.send(n.url_,n.method_,n.body_,n.headers_).then(function(t){null!==n.progressCallback_&&t.removeUploadProgressListener(r),n.pendingXhr_=null,t=t;var o=t.getErrorCode()===Ke.NO_ERROR,i=t.getStatus();if(!o||n.isRetryStatusCode_(i)){var a=t.getErrorCode()===Ke.ABORT;return void e(!1,new Rt(!1,null,a))}var s=Ce(n.successCodes_,i);e(!0,new Rt(s,t))})}function t(e,t){var r=n.resolve_,i=n.reject_,a=t.xhr;if(t.wasSuccessCode)try{var s=n.callback_(a,a.getResponseText());U(s)?r(s):r()}catch(e){i(e)}else if(null!==a){var u=o();u.setServerResponseProp(a.getResponseText()),i(n.errorCallback_?n.errorCallback_(a,u):u)}else if(t.canceled){var u=n.appDelete_?g():c();i(u)}else{var u=l();i(u)}}var n=this;this.canceled_?t(!1,new Rt(!1,null,!0)):this.backoffId_=Be(e,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&He(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=Ce(n,e),o=Ce(this.additionalRetryCodes_,e);return t||r||o},e}(),Rt=function(){function e(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}return e}(),Pt=function(){function e(e,t,n){function r(e,t){return new wt(e,t)}if(this.bucket_=null,this.authWrapper_=new kt(e,r,Qe,this,t),this.app_=e,null!=n)this.bucket_=ft.makeFromBucketSpec(n);else{var o=this.authWrapper_.bucket();null!=o&&(this.bucket_=new ft(o,""))}this.internals_=new xt(this)}return e.prototype.ref=function(e){function t(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if(ce("ref",[pe(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new wt(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{ft.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}}return ce("refFromURL",[pe(t,!1)],arguments),new wt(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){ce("setMaxUploadRetryTime",[ye()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this.authWrapper_.maxOperationRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxOperationRetryTime=function(e){ce("setMaxOperationRetryTime",[ye()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),xt=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),F(void 0)},e}(),Ot="storage";!function(e){var t={TaskState:ct,TaskEvent:ut,StringFormat:it,Storage:Pt,Reference:wt};e.INTERNAL.registerService(Ot,ze,t,void 0,!0)}(Ye.a)}]);
//# sourceMappingURL=main.3e33118d.js.map